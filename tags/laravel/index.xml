<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Laravel on 志宇日常</title><link>https://www.chihyu.me/tags/laravel/</link><description>Recent content in Laravel on 志宇日常</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Fri, 23 Dec 2022 00:00:00 +0800</lastBuildDate><atom:link href="https://www.chihyu.me/tags/laravel/index.xml" rel="self" type="application/rss+xml"/><item><title>Laravel 使用 axios 匯出 Excel</title><link>https://www.chihyu.me/2022/12/laravel-magic-use-axios-export-excel/</link><pubDate>Fri, 23 Dec 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/12/laravel-magic-use-axios-export-excel/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel-magic/banner.png" alt="Featured image of post Laravel 使用 axios 匯出 Excel" />&lt;h2 id="前言">前言&lt;/h2>
&lt;p>說到 Laravel 匯出 excel 相信大家肯定對這套件不陌生&lt;br>
&lt;a class="link" href="https://docs.laravel-excel.com/3.1/getting-started/" target="_blank" rel="noopener"
>套件連結&lt;/a>&lt;/p>
&lt;p>不過文件內沒有提到如何透過 api 的方式下載檔案，&lt;br>
我自己也摸索好久，終於找到方法了&lt;br>
想說來跟大家分享一下&lt;/p>
&lt;h2 id="主要">主要&lt;/h2>
&lt;h3 id="環境介紹">環境介紹&lt;/h3>
&lt;ul>
&lt;li>&lt;code>maatwebsite/excel&lt;/code> 版本 &lt;code>3.1&lt;/code>&lt;/li>
&lt;/ul>
&lt;h3 id="前端">前端&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 檔案名稱
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kd">let&lt;/span> &lt;span class="nx">fileName&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;xxx.xlsx&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// api 路徑
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kd">let&lt;/span> &lt;span class="nx">url&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 資料
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kd">let&lt;/span> &lt;span class="nx">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">axios&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">post&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">url&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">responseType&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;arraybuffer&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">headers&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;Content-Type&amp;#39;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;application/json&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}).&lt;/span>&lt;span class="nx">then&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">response&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">url&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">window&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">URL&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createObjectURL&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="nx">Blob&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="nx">response&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// xlsx
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">type&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// xls
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// type: &amp;#39;application/vnd.ms-excel&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">link&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createElement&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;a&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">link&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">href&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">url&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">link&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">setAttribute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;download&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">fileName&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">body&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">appendChild&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">link&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">link&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">click&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="k">catch&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>檔案類別可以參考： &lt;a class="link" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types" target="_blank" rel="noopener"
>MIME Types&lt;/a>&lt;/p>
&lt;h3 id="api-的-controller">API 的 controller&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">use&lt;/span> &lt;span class="nx">Illuminate\Http\Request&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">use&lt;/span> &lt;span class="nx">App\Exports\OrderExport&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">use&lt;/span> &lt;span class="nx">Maatwebsite\Excel\Facades\Excel&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">OrderExportController&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Controller&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sd">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * 匯出
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">export&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Request&lt;/span> &lt;span class="nv">$request&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nx">Excel&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">download&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="nx">OrderExport&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$orders&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="s1">&amp;#39;訂單.xlsx&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>這邊就不特別解釋 &lt;code>Excel::download&lt;/code> 的使用方法了&lt;br>
之後再跟大家分享&lt;/p></description></item><item><title>Day 30. 結束</title><link>https://www.chihyu.me/2022/11/laravel7-30days-day29-pagination/</link><pubDate>Wed, 30 Nov 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/11/laravel7-30days-day29-pagination/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post Day 30. 結束" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>上一篇: &lt;a class="link" href="../../2022/11/laravel7-30days-day29-pagination" title="Day 29. 分頁 Pagination"
>Day 29. 分頁 Pagination&lt;/a>&lt;/p>
&lt;h2 id="主要">主要&lt;/h2>
&lt;p>很快的來到了最後一天&lt;br>
其實還有很多東西可以分享 &lt;br>
短短三十天很難將我過去所學的項目一一分享&lt;br>
也是要訓練自己對 Laravel 的熟悉的程度&lt;br>
才會開這個系列&lt;br>
Laravel7 可能在我職涯也會慢慢走路歷史了吧&lt;br>
之後可能會使用更新的版本&lt;br>
當然，若有不錯的項目還是會想要持續分享&lt;br>
也算是一個互相學習的過程&lt;/p>
&lt;p>希望大家再開發的路上都一切順利 ~~~~&lt;/p></description></item><item><title>Day 29. 分頁 Pagination</title><link>https://www.chihyu.me/2022/11/laravel7-30days-day29-pagination/</link><pubDate>Tue, 29 Nov 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/11/laravel7-30days-day29-pagination/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post Day 29. 分頁 Pagination" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;p>上一篇: &lt;a class="link" href="../../2022/11/laravel7-30days-day28-log" title="Day 28. Log"
>Day 28. Log&lt;/a>&lt;/p>
&lt;p>結束 Log 使用&lt;br>
今天繼續來優化我們的 ToDo List吧&lt;br>
聊聊我們的 Pagination&lt;/p>
&lt;h2 id="主要">主要&lt;/h2>
&lt;p>&lt;a class="link" href="https://laravel.com/docs/7.x/pagination" target="_blank" rel="noopener"
>上文件&lt;/a>
Pagination 分頁&lt;br>
顧名思義就是將資料分頁
避免當下頁面資料量過多會影響使用者體驗&lt;br>
使用其使也很輕鬆簡單&lt;/p>
&lt;h2 id="如何使用">如何使用&lt;/h2>
&lt;h3 id="controller">controller&lt;/h3>
&lt;p>我們將原本列表要 get() 改成 paginate()&lt;/p>
&lt;p>檔案: &lt;code>app/Http/Controllers/TaskController.php&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">index&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$tasks&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Auth&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">user&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">tasks&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">paginate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">view&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;tasks.index&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">compact&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;tasks&amp;#39;&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>參數是一頁要幾筆&lt;br>
只要這樣 Laravel 就會幫你做好分頁&lt;/p>
&lt;h3 id="view">view&lt;/h3>
&lt;p>加上&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span> &lt;span class="nv">$tasks&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">links&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>完成！&lt;/p>
&lt;h2 id="demo">Demo&lt;/h2>
&lt;p>&lt;img src="../../images/laravel7-30days/day29/demo.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>當然，如果頁面的樣式你不喜歡可以自定義&lt;br>
之後再跟大家分享如何客制&lt;br>
今天先簡單說明這個方便的功能就好&lt;/p></description></item><item><title>Day 28. Log</title><link>https://www.chihyu.me/2022/11/laravel7-30days-day28-log/</link><pubDate>Mon, 28 Nov 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/11/laravel7-30days-day28-log/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post Day 28. Log" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;p>上一篇: &lt;a class="link" href="../../2022/11/laravel7-30days-day27-session" title="Day 27. Session"
>Day 27. Session&lt;/a>&lt;/p>
&lt;p>結束 session&lt;br>
今天要來聊聊 Log&lt;/p>
&lt;h2 id="主要">主要&lt;/h2>
&lt;p>&lt;a class="link" href="https://laravel.com/docs/7.x/logging#main-content" title="文件"
target="_blank" rel="noopener"
>上文件&lt;/a>&lt;/p>
&lt;p>預設的 Log 是一個檔案&lt;br>
你可以在你的程式裏面埋入你要寫入的 Log
而這些 Log 會被存放在 &lt;code>storage/logs&lt;/code> 裏面&lt;/p>
&lt;p>你可以在 &lt;code>.env&lt;/code> 設定你的 Log 類別&lt;br>
官方有提供很多種，&lt;br>
我都是使用 &lt;code>daily&lt;/code> 每天會產生一個以日期為主的檔案&lt;/p>
&lt;h3 id="級別">級別&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Log&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">emergency&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$message&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Log&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">alert&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$message&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Log&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">critical&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$message&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Log&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$message&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Log&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">warning&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$message&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Log&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">notice&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$message&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Log&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$message&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Log&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">debug&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$message&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="如何使用">如何使用？&lt;/h2>
&lt;h3 id="env-設定">env 設定&lt;/h3>
&lt;p>&lt;img src="../../images/laravel7-30days/day28/setting-env.jpeg"
loading="lazy"
>&lt;/p>
&lt;h3 id="使用">使用&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">use&lt;/span> &lt;span class="nx">Illuminate\Support\Facades\Log&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">TaskController&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Controller&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">index&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Log&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;log test&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="檢查">檢查&lt;/h3>
&lt;p>&lt;img src="../../images/laravel7-30days/day28/demo.jpeg"
loading="lazy"
>
就是這樣簡單&lt;/p></description></item><item><title>Day 27. Session</title><link>https://www.chihyu.me/2022/11/laravel7-30days-day27-session/</link><pubDate>Sun, 27 Nov 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/11/laravel7-30days-day27-session/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post Day 27. Session" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;p>上一篇: &lt;a class="link" href="../../2022/11/laravel7-30days-day26-validation-request" title="Day 26. Validation-2 Request 讓 Controller 更乾淨"
>Day 26. Validation-2 Request 讓 Controller 更乾淨&lt;/a>&lt;/p>
&lt;p>今天來跟各位聊聊 session&lt;/p>
&lt;h2 id="主要">主要&lt;/h2>
&lt;p>&lt;a class="link" href="https://laravel.com/docs/7.x/session#main-content" title="文件"
target="_blank" rel="noopener"
>上文件&lt;/a>&lt;/p>
&lt;p>開發過網站的肯定都對 session 不陌生&lt;br>
今天就不多加綴述他是什麼&lt;br>
只是剛好開發 todo功能 剛好想到可以講一下&lt;/p>
&lt;p>我們平常送出表單的時候&lt;br>
都會希望系統有所回應 如『新增成功』、『新增失敗』等等&amp;hellip;&lt;/p>
&lt;h3 id="flash-session">flash session&lt;/h3>
&lt;p>&lt;a class="link" href="https://laravel.com/docs/7.x/session#flash-data" target="_blank" rel="noopener"
>flash session&lt;/a> 就是只會保留一次的短暫 session
跳轉下個頁面就不會存在了&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">session&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">flash&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;key&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;value&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>這樣就可以使用了 ~&lt;br>
所以我們只需要在 Controller 更新後 加上&lt;br>
檔案: &lt;code>app/Http/Controllers/TaskController.php&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">TaskRequest&lt;/span> &lt;span class="nv">$request&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Task&lt;/span> &lt;span class="nv">$task&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$task&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">update&lt;/span>&lt;span class="p">([&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;title&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$request&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">title&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">session&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">flash&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;flash-alert-success&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;更新成功!&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">redirect&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">route&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;tasks.index&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然後在列表的地方讀取這個session&lt;br>
檔案: &lt;code>resources/views/tasks/index.blade.php&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl"> &lt;span class="o">@&lt;/span>&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">session&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;flash-alert-success&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">div&lt;/span> &lt;span class="nx">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;alert alert-success&amp;#34;&lt;/span> &lt;span class="nx">role&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;alert&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{{&lt;/span> &lt;span class="nx">session&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;flash-alert-success&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="nx">div&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">@&lt;/span>&lt;span class="k">elseif&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">session&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;flash-alert-error&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">div&lt;/span> &lt;span class="nx">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;alert alert-danger&amp;#34;&lt;/span> &lt;span class="nx">role&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;alert&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{{&lt;/span> &lt;span class="nx">session&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;flash-alert-error&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="nx">div&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">@&lt;/span>&lt;span class="k">endif&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="demo">Demo&lt;/h3>
&lt;p>&lt;img src="../../images/laravel7-30days/day27/demo.jpeg"
loading="lazy"
>&lt;/p></description></item><item><title>Day 26. Validation-2 Request 讓 Controller 更乾淨</title><link>https://www.chihyu.me/2022/11/laravel7-30days-day26-validation-request/</link><pubDate>Sat, 26 Nov 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/11/laravel7-30days-day26-validation-request/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post Day 26. Validation-2 Request 讓 Controller 更乾淨" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;p>上一篇: &lt;a class="link" href="../../2022/11/laravel7-30days-day25-validation" title="Day 25. Validation"
>Day 25. Validation&lt;/a>&lt;/p>
&lt;p>上篇我們聊了 驗證，
接著我們來說我平常使用驗證的方法，&lt;/p>
&lt;h2 id="主要">主要&lt;/h2>
&lt;p>今天範例的驗證欄位比較少，所以可能比較沒感覺，&lt;br>
平常驗證欄位只要多 controller 的頁面就會變很肥，&lt;br>
所以驗證可以搬到其他物件去做，&lt;br>
讓 controller 乾淨一點&lt;/p>
&lt;h2 id="設定-request">設定 Request&lt;/h2>
&lt;p>&lt;a class="link" href="https://laravel.com/docs/7.x/validation#form-request-validation" title="文件"
target="_blank" rel="noopener"
>文件&lt;/a>&lt;/p>
&lt;p>執行指令&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">php artisan make:request TaskRequest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>這樣就會在 &lt;code>app/Http/Requests&lt;/code> 看到你產生的檔案 &lt;code>TaskRequest.php&lt;/code>&lt;br>
可以把原本的驗證項目放進去 &lt;code>rules()&lt;/code> 的 function 了&lt;br>
檔案: &lt;code>app/Http/Requests/TaskRequest.php&lt;/code>&lt;/p>
&lt;h3 id="規則設定">規則設定&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">rules&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;title&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;required&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="開關">開關&lt;/h3>
&lt;p>另外我們可以把 &lt;code>authorize()&lt;/code> 設定成 &lt;code>true&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">authorize&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="自定義錯誤訊息">自定義錯誤訊息&lt;/h3>
&lt;p>錯誤訊息可以放在 &lt;code>messages()&lt;/code>&lt;br>
這個 function 是沒有預設產生的，要自己加上去&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">messages&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;title.required&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;標題欄位是必填的&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="設定-controller">設定 controller&lt;/h2>
&lt;p>把原本 &lt;code>$request&lt;/code> 注入 &lt;code>Request&lt;/code> 改成剛剛建立的 &lt;code>TaskRequest&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">store&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">TaskRequest&lt;/span> &lt;span class="nv">$request&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Auth&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">user&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">tasks&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">create&lt;/span>&lt;span class="p">([&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;title&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$request&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">title&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">redirect&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">route&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;tasks.index&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>這樣就可以了&lt;/p>
&lt;h2 id="demo">DEMO&lt;/h2>
&lt;p>&lt;img src="../../images/laravel7-30days/day26/invalid-page.jpeg"
loading="lazy"
>&lt;/p></description></item><item><title>Day 25. Validation</title><link>https://www.chihyu.me/2022/11/laravel7-30days-day25-validation/</link><pubDate>Fri, 25 Nov 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/11/laravel7-30days-day25-validation/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post Day 25. Validation" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;p>上一篇: &lt;a class="link" href="../../2022/11/laravel7-30days-day23-todo-main" title="Day 24. 實作 TODO 練習 下篇:畫面及功能"
>Day 24. 實作 TODO 練習 下篇:畫面及功能&lt;/a>&lt;/p>
&lt;p>上篇實作了 ToDo 的一些簡單功能及頁面，
接著我們來說『驗證』&lt;/p>
&lt;h2 id="主要">主要&lt;/h2>
&lt;p>上&lt;a class="link" href="https://laravel.com/docs/7.x/validation" title="文件"
target="_blank" rel="noopener"
>文件&lt;/a>&lt;/p>
&lt;p>Laravel 的驗證真的滿方便的，&lt;br>
可以參考&lt;a class="link" href="https://laravel.com/docs/7.x/validation#available-validation-rules" title="可用的規則"
target="_blank" rel="noopener"
>規則&lt;/a>&lt;br>
這些規則都可以設定驗證&lt;/p>
&lt;p>驗證失敗的時候就會導回去前面那一頁，&lt;br>
這時候就可以跟 &lt;code>old()&lt;/code> 搭配保留原本的值，&lt;/p>
&lt;h3 id="快速上手">快速上手&lt;/h3>
&lt;p>如我們範例 TODO 只需要驗證一個 title 為必填
可以再表單送出的那刻加上驗證，&lt;br>
失敗的話就會導回去前面那頁的表單，&lt;/p>
&lt;p>檔案: &lt;code>app/Http/Controllers/TaskController.php&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">store&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Request&lt;/span> &lt;span class="nv">$request&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 加這個 !!!
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Validator&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">make&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$request&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">all&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;title&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;required&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">])&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">validate&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Auth&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">user&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">tasks&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">create&lt;/span>&lt;span class="p">([&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;title&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$request&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">title&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">redirect&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">route&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;tasks.index&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>而我們要如何接收值呢？
驗證失敗的時候我們都會接收到一個 &lt;code>$errors&lt;/code> 參數&lt;br>
如以下範例&lt;/p>
&lt;p>檔案: &lt;code>resources/views/tasks/create.blade.php&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="o">@&lt;/span>&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">$errors&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">has&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;title&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">@&lt;/span>&lt;span class="k">foreach&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">$errors&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;title&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="nv">$message&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nx">div&lt;/span> &lt;span class="nx">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;color:red;&amp;#34;&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{{&lt;/span> &lt;span class="nv">$message&lt;/span> &lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;/&lt;/span>&lt;span class="nx">div&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">@&lt;/span>&lt;span class="k">endforeach&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">@&lt;/span>&lt;span class="k">endif&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="範例">範例&lt;/h3>
&lt;p>&lt;img src="../../images/laravel7-30days/day25/invalid-page.jpeg"
loading="lazy"
>&lt;/p></description></item><item><title>Day 24. 實作 TODO 練習 下篇:畫面及功能</title><link>https://www.chihyu.me/2022/11/laravel7-30days-day23-todo-main/</link><pubDate>Thu, 24 Nov 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/11/laravel7-30days-day23-todo-main/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post Day 24. 實作 TODO 練習 下篇:畫面及功能" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;p>上一篇: &lt;a class="link" href="../../2022/11/laravel7-30days-day23-todo-intro" title="Day 23. 實作 TODO 練習 上篇:前置作業 "
>Day 23. 實作 TODO 練習 上篇:前置作業 &lt;/a>&lt;/p>
&lt;p>上篇主要建制一些前置作業
接下來要實作 ToDo 的一些簡單功能及頁面，&lt;/p>
&lt;h2 id="主要">主要&lt;/h2>
&lt;h3 id="controller">controller&lt;/h3>
&lt;p>可以直接參考我的 TaskController&lt;br>
檔案: &lt;code>app/Http/Controllers/TaskController.php&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">TaskController&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Controller&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sd">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * 列表頁
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">index&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$tasks&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Auth&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">user&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">tasks&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">view&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;tasks.index&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">compact&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;tasks&amp;#39;&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sd">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * 新增頁
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">create&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">view&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;tasks.create&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sd">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * 新增
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">store&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Request&lt;/span> &lt;span class="nv">$request&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Auth&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">user&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">tasks&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">create&lt;/span>&lt;span class="p">([&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;title&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$request&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">title&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">redirect&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">route&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;tasks.index&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sd">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * 更新頁
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">edit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Task&lt;/span> &lt;span class="nv">$task&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">view&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;tasks.edit&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">compact&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;task&amp;#39;&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sd">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * 更新
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Request&lt;/span> &lt;span class="nv">$request&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Task&lt;/span> &lt;span class="nv">$task&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$task&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">update&lt;/span>&lt;span class="p">([&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;title&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$request&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">title&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">redirect&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">route&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;tasks.index&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sd">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * 刪除
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">destroy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Task&lt;/span> &lt;span class="nv">$task&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$task&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">delete&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">redirect&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">route&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;tasks.index&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="view">view&lt;/h3>
&lt;p>view 的頁面都在這個資料夾裏面 &lt;code>resources/views/tasks/&lt;/code>&lt;/p>
&lt;ul>
&lt;li>列表頁: &lt;code>resources/views/tasks/index.blade.php&lt;/code>&lt;/li>
&lt;li>新增頁: &lt;code>resources/views/tasks/create.blade.php&lt;/code>&lt;/li>
&lt;li>更新頁: &lt;code>resources/views/tasks/edit.blade.php&lt;/code>&lt;/li>
&lt;/ul></description></item><item><title>Day 23. 實作 TODO 練習 上篇:前置作業</title><link>https://www.chihyu.me/2022/11/laravel7-30days-day23-todo-intro/</link><pubDate>Wed, 23 Nov 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/11/laravel7-30days-day23-todo-intro/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post Day 23. 實作 TODO 練習 上篇:前置作業" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;p>上一篇: &lt;a class="link" href="../../2022/11/laravel7-30days-day22-make-resource-controller" title="Day 22. CRUD 很簡單 Resource Controller"
>Day 22. CRUD 很簡單 Resource Controller&lt;/a>&lt;/p>
&lt;p>接下來準備實作 ToDo 的功能，
這是上篇主要建制一些前置作業&lt;/p>
&lt;h2 id="主要">主要&lt;/h2>
&lt;p>todo 功能我會以 task(任務) 作為命名，&lt;br>
因為我感覺這樣比較直觀一點&lt;/p>
&lt;h3 id="資料庫設計">資料庫設計&lt;/h3>
&lt;p>&lt;img src="../../images/laravel7-30days/day23/db-diagram.jpeg"
loading="lazy"
>&lt;/p>
&lt;h3 id="建立-model--migration">建立 Model + Migration&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">php artisan make:model Models/Task -m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="../../images/laravel7-30days/day23/make-model-migration.jpeg"
loading="lazy"
>&lt;/p>
&lt;h3 id="編輯-migration">編輯 Migration&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">CreateTasksTable&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Migration&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sd">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * Run the migrations.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> *
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * @return void
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">up&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Schema&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;tasks&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">Blueprint&lt;/span> &lt;span class="nv">$table&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$table&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">id&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$table&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">foreignId&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;user_id&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">constrained&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;users&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">onUpdate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;cascade&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">onDelete&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;cascade&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$table&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;title&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">comment&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;標題&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$table&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">timestamps&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$table&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">softDeletes&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sd">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * Reverse the migrations.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> *
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * @return void
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">down&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Schema&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">dropIfExists&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;tasks&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="執行-migration">執行 Migration&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">php artisan migrate
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="../../images/laravel7-30days/day23/run-migrate.jpeg"
loading="lazy"
>&lt;/p>
&lt;h3 id="調整-model">調整 Model&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>檔案 &lt;code>app/Models/Task.php&lt;/code>&lt;/p>
&lt;ol>
&lt;li>加入 fillable&lt;/li>
&lt;li>關聯 user&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Task&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Model&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">protected&lt;/span> &lt;span class="nv">$fillable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;user_id&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;title&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sd">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * 關聯會員
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> *
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * @return Illuminate\Database\Eloquent\Model User
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">user&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">belongesTo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>檔案 &lt;code>app/Models/User.php&lt;/code>&lt;/p>
&lt;ol>
&lt;li>關聯 Task (一對多)&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">User&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Authenticatable&lt;/span> &lt;span class="k">implements&lt;/span> &lt;span class="nx">MustVerifyEmail&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sd">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * 關聯 Task
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> *
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * @return Illuminate\Database\Eloquent\Model Task
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">tasks&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">hasMany&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Task&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="建立-controller">建立 Controller&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">php artisan make:controller TaskController -r
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="../../images/laravel7-30days/day23/make-resource-controller-cli.jpeg"
loading="lazy"
>&lt;/p>
&lt;h3 id="建立路由">建立路由&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">resource&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;tasks&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;TaskController&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Day 22. CRUD 很簡單 Resource Controller</title><link>https://www.chihyu.me/2022/11/laravel7-30days-day22-make-resource-controller/</link><pubDate>Tue, 22 Nov 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/11/laravel7-30days-day22-make-resource-controller/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post Day 22. CRUD 很簡單 Resource Controller" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;p>上一篇: &lt;a class="link" href="../../2022/11/laravel7-30days-day21-collection" title="Day 21. 資料整理好幫手 - Collection"
>Day 21. 資料整理好幫手 - Collection&lt;/a>&lt;/p>
&lt;p>接下來會實作 ToDo 的功能，
實作前我們先介紹一下 Resource Controllers&lt;/p>
&lt;h2 id="主要">主要&lt;/h2>
&lt;p>上&lt;a class="link" href="https://laravel.com/docs/7.x/controllers#resource-controllers" title="resource controller"
target="_blank" rel="noopener"
>文件&lt;/a>&lt;/p>
&lt;p>之前我們於&lt;a class="link" href="../../2022/11/laravel7-30days-day5-router" title="Day 5. 路由: Router"
>Day 5. 路由: Router&lt;/a> 有介紹過我推薦的 route crud的使用，直接附上上次範例&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">group&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="s1">&amp;#39;prefix&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;users&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;as&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;users.&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 列表
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;UserController@index&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;index&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 新增
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/create&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;UserController@create&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;create&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">post&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;UserController@store&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;store&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 編輯
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/{user}/edit&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;UserController@edit&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;edit&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">patch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/{user}&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;UserController@update&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;update&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 刪除
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">delete&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/{user}&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;UserController@destroy&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;destroy&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>可以看到 『列表』、『新增』、『更新』、『刪除』的路由設定，
為何我要這樣設定呢？&lt;/p>
&lt;p>因為 Laravel 對於這件事有做好的功能，
上面的內容可以簡化成&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">resource&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;users&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;UserController&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>而我們要如何便利的去對應這些路由呢？&lt;br>
你只要下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">php artisan make:controller UserController -r
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="../../images/laravel7-30days/day22/make-resource-controller-cli.jpeg"
loading="lazy"
>
(圖片是因應下一篇文章需要)&lt;/p>
&lt;p>Laravel 就會幫你產生好剛剛的路由所有對應到的 controller 的 functions&lt;br>
相當方便。&lt;/p>
&lt;p>產生的檔案會像下面這樣&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">namespace&lt;/span> &lt;span class="nx">App\Http\Controllers&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">use&lt;/span> &lt;span class="nx">Illuminate\Http\Request&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">UserController&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Controller&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sd">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * 列表
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">index&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sd">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * 新增的頁面
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">create&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sd">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * 新增
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">store&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Request&lt;/span> &lt;span class="nv">$request&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sd">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * 顯示
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">show&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$id&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sd">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * 更新的頁面
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">edit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$id&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sd">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * 更新
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Request&lt;/span> &lt;span class="nv">$request&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$id&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sd">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * 刪除
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">destroy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$id&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Day 21. 資料整理好幫手 - Collection</title><link>https://www.chihyu.me/2022/11/laravel7-30days-day21-collection/</link><pubDate>Mon, 21 Nov 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/11/laravel7-30days-day21-collection/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post Day 21. 資料整理好幫手 - Collection" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;p>上一篇: &lt;a class="link" href="../../2022/11/laravel7-30days-day20-eloquent-relationships-polymorphic-many-to-many" title="Day 20. Eloquent Polymorphic Relationships 多態的多對多"
>Day 20. Eloquent Polymorphic Relationships 多態的多對多&lt;/a>&lt;/p>
&lt;p>今天要來分享 Collection&lt;/p>
&lt;h2 id="主要">主要&lt;/h2>
&lt;p>上&lt;a class="link" href="https://laravel.com/docs/7.x/collections" title="collection"
target="_blank" rel="noopener"
>文件&lt;/a>&lt;/p>
&lt;p>資料庫取出來預設都是 collection，&lt;br>
以前還不知道這東西時，都是全部轉成 array 在依照需求直接整理&lt;br>
後來才慢慢發現 collection 這個好東西&lt;/p>
&lt;p>看起來跟 array 做一樣的事情&lt;br>
不過 code 看起來會比較好看而且可讀性也比較高，會相對好維護&lt;/p>
&lt;p>以下提供幾個我常用的 function&lt;/p>
&lt;h2 id="functions">functions&lt;/h2>
&lt;h3 id="map">map()&lt;/h3>
&lt;p>你想將資料庫的值取出後，做一些加工整理就可以使用這個&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$products&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Product&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$products&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">map&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$product&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;code&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$product&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">code&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$product&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;price&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$product&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">price&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>以上如果使用 php 原生方法&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$products&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Product&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">foreach&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$products&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="nv">$product&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$data&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;code&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$product&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">code&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$product&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;price&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$product&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">price&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>是不是 map 使用上會比較好看一點呢？&lt;/p>
&lt;h3 id="groupby">groupBy()&lt;/h3>
&lt;p>概念跟資料庫的 groupby 很像，&lt;br>
就是將資料群組起來&lt;br>
群組起來的會當作他的 key&lt;/p>
&lt;p>以上面的例子&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$products&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Product&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$products&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">groupBy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$product&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nv">$product&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">type&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>商品就會依照他的類別 &lt;code>type&lt;/code> 群組起來&lt;/p>
&lt;h3 id="filter">filter()&lt;/h3>
&lt;p>沒啥好說的&lt;br>
直接放範例你們就會懂了&lt;br>
就是篩選你們要的資料而已&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$collection&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">collect&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$filtered&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$collection&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">$value&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$key&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nv">$value&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$filtered&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">all&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="結語">結語&lt;/h2>
&lt;p>還有很多好方法，
我嘗嘗懊惱怎麼整理好資料時就會參考官方的 collection 的&lt;a class="link" href="https://laravel.com/docs/7.x/collections#available-methods" target="_blank" rel="noopener"
>方法們&lt;/a>&lt;/p></description></item><item><title>Day 20. Eloquent Polymorphic Relationships 多態的多對多</title><link>https://www.chihyu.me/2022/11/laravel7-30days-day20-eloquent-relationships-polymorphic-many-to-many/</link><pubDate>Sun, 20 Nov 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/11/laravel7-30days-day20-eloquent-relationships-polymorphic-many-to-many/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post Day 20. Eloquent Polymorphic Relationships 多態的多對多" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>上一篇: &lt;a class="link" href="../../2022/11/laravel7-30days-day19-eloquent-relationships-polymorphic-one-to-many" title="Day 19. Eloquent Polymorphic Relationships 多態的一對多"
>Day 19. Eloquent Polymorphic Relationships 多態的一對多&lt;/a>&lt;/p>
&lt;p>今天要來分享 多態的多對多&lt;/p>
&lt;h2 id="關聯表文章區">關聯表文章區&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>關聯&lt;/th>
&lt;th>名稱&lt;/th>
&lt;th>傳送門&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>One To One&lt;/td>
&lt;td>一對一&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day15-eloquent-relationships-one-to-one" title="Day 15. Eloquent Relationships 一對一"
>Day 15. Eloquent Relationships 一對一&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>One To Many&lt;/td>
&lt;td>多對多&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day16-eloquent-relationships-one-to-many" title="Day 16. Eloquent Relationships 一對多"
>Day 16. Eloquent Relationships 一對多&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Many To Many&lt;/td>
&lt;td>多對多&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day17-eloquent-relationships-many-to-many" title="Day 17. Eloquent Relationships 多對多"
>Day 17. Eloquent Relationships 多對多&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Polymorphic One To One&lt;/td>
&lt;td>多態的一對一&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day18-eloquent-relationships-polymorphic-one-to-one" title="Day 18. Eloquent Polymorphic Relationships 多態的一對一"
>Day 18. Eloquent Polymorphic Relationships 多態的一對一&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Polymorphic One To Many&lt;/td>
&lt;td>多態的一對多&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day19-eloquent-relationships-polymorphic-one-to-many" title="Day 19. Eloquent Polymorphic Relationships 多態的一對多"
>Day 19. Eloquent Polymorphic Relationships 多態的一對多&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Polymorphic Many To Many&lt;/td>
&lt;td>多態的多對多&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day20-eloquent-relationships-polymorphic-many-to-many" title="Day 20. Eloquent Polymorphic Relationships 多態的多對多"
>Day 20. Eloquent Polymorphic Relationships 多態的多對多&lt;/a>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="主要內容">主要內容&lt;/h2>
&lt;p>&lt;a class="link" href="https://laravel.com/docs/7.x/eloquent-relationships#many-to-many-polymorphic-relations" target="_blank" rel="noopener"
>文件&lt;/a>&lt;/p>
&lt;h3 id="表的關係">表的關係&lt;/h3>
&lt;p>假設我們今天要設計標籤管理&lt;br>
貼文有標籤 &lt;br>
影片也有標籤&lt;br>
甚至標籤也有自己的資訊&lt;br>
就是可以透過 第3張表多對多的方式關聯他們&lt;/p>
&lt;p>資料表關係如下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">posts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id - integer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name - string
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">videos
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id - integer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name - string
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tags
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id - integer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name - string
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">taggables
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tag_id - integer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> taggable_id - integer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> taggable_type - string
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="../../images/laravel7-30days/day20/polymorphic-many-to-many.jpeg"
loading="lazy"
>&lt;/p>
&lt;h3 id="model-設定">Model 設定&lt;/h3>
&lt;p>&lt;code>app/Models/Tag.php&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Tag&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Model&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 關聯貼文
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">posts&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">morphedByMany&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Post&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;taggable&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 關聯影片
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">videos&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">morphedByMany&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Video&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;taggable&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>app/Models/Post.php&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Post&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Model&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">tags&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">morphToMany&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Tag&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;taggable&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>app/Models/Video.php&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Video&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Model&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">tags&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">morphToMany&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Tag&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;taggable&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="如何使用">如何使用&lt;/h3>
&lt;ul>
&lt;li>取得&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$post&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Post&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// post 取得 tag
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">foreach&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">$post&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">tags&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="nv">$tag&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$tag&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Tag&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># tag 取得 video
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">foreach&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">$tag&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">videos&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="nv">$video&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Day 19. Eloquent Polymorphic Relationships 多態的一對多</title><link>https://www.chihyu.me/2022/11/laravel7-30days-day19-eloquent-relationships-polymorphic-one-to-many/</link><pubDate>Sat, 19 Nov 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/11/laravel7-30days-day19-eloquent-relationships-polymorphic-one-to-many/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post Day 19. Eloquent Polymorphic Relationships 多態的一對多" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>上一篇: &lt;a class="link" href="../../2022/11/laravel7-30days-day18-eloquent-relationships-polymorphic-one-to-one" title="Day 18. Eloquent Polymorphic Relationships 多態的一對一"
>Day 18. Eloquent Polymorphic Relationships 多態的一對一&lt;/a>
今天要來分享 多態的一對多&lt;/p>
&lt;h2 id="關聯表文章區">關聯表文章區&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>關聯&lt;/th>
&lt;th>名稱&lt;/th>
&lt;th>傳送門&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>One To One&lt;/td>
&lt;td>一對一&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day15-eloquent-relationships-one-to-one" title="Day 15. Eloquent Relationships 一對一"
>Day 15. Eloquent Relationships 一對一&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>One To Many&lt;/td>
&lt;td>多對多&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day16-eloquent-relationships-one-to-many" title="Day 16. Eloquent Relationships 一對多"
>Day 16. Eloquent Relationships 一對多&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Many To Many&lt;/td>
&lt;td>多對多&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day17-eloquent-relationships-many-to-many" title="Day 17. Eloquent Relationships 多對多"
>Day 17. Eloquent Relationships 多對多&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Polymorphic One To One&lt;/td>
&lt;td>多態的一對一&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day18-eloquent-relationships-polymorphic-one-to-one" title="Day 18. Eloquent Polymorphic Relationships 多態的一對一"
>Day 18. Eloquent Polymorphic Relationships 多態的一對一&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Polymorphic One To Many&lt;/td>
&lt;td>多態的一對多&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day19-eloquent-relationships-polymorphic-one-to-many" title="Day 19. Eloquent Polymorphic Relationships 多態的一對多"
>Day 19. Eloquent Polymorphic Relationships 多態的一對多&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Polymorphic Many To Many&lt;/td>
&lt;td>多態的多對多&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day20-eloquent-relationships-polymorphic-many-to-many" title="Day 20. Eloquent Polymorphic Relationships 多態的多對多"
>Day 20. Eloquent Polymorphic Relationships 多態的多對多&lt;/a>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="主要內容">主要內容&lt;/h2>
&lt;p>&lt;a class="link" href="https://laravel.com/docs/7.x/eloquent-relationships#one-to-many-polymorphic-relations" target="_blank" rel="noopener"
>文件&lt;/a>&lt;/p>
&lt;h3 id="表的關係">表的關係&lt;/h3>
&lt;p>延續昨天的關係一張換多張的時候，&lt;/p>
&lt;p>貼文有多張圖片、使用者也有多張圖片 &lt;br>
我可以透過第3張表去存取圖片&lt;br>
資料表關係如下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">users
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id - integer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name - string
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">posts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id - integer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name - string
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">images
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id - integer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> url - string
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> imageable_id - integer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> imageable_type - string
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="../../images/laravel7-30days/day19/polymorphic-one-to-many.jpeg"
loading="lazy"
>&lt;/p>
&lt;h3 id="model-設定">Model 設定&lt;/h3>
&lt;p>&lt;code>app/Models/Image.php&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Image&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Model&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">imageable&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">morphTo&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>app/Models/User.php&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">User&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Model&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">images&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">morphMany&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Image&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;imageable&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>app/Models/Post.php&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Post&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Model&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">images&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">morphMany&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Image&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;imageable&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="如何使用">如何使用&lt;/h3>
&lt;ul>
&lt;li>取得&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 會員取得圖片
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nv">$user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">User&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$image&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$user&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">images&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$image&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Image&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$imageable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$image&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">imageable&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Day 18. Eloquent Polymorphic Relationships 多態的一對一</title><link>https://www.chihyu.me/2022/11/laravel7-30days-day18-eloquent-relationships-polymorphic-one-to-one/</link><pubDate>Fri, 18 Nov 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/11/laravel7-30days-day18-eloquent-relationships-polymorphic-one-to-one/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post Day 18. Eloquent Polymorphic Relationships 多態的一對一" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>上一篇: &lt;a class="link" href="../../2022/11/laravel7-30days-day17-eloquent-relationships-many-to-many" title="Day 17. Eloquent Relationships 多對多"
>Day 17. Eloquent Relationships 多對多&lt;/a>&lt;br>
今天要來分享 多態的一對一&lt;/p>
&lt;h2 id="關聯表文章區">關聯表文章區&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>關聯&lt;/th>
&lt;th>名稱&lt;/th>
&lt;th>傳送門&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>One To One&lt;/td>
&lt;td>一對一&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day15-eloquent-relationships-one-to-one" title="Day 15. Eloquent Relationships 一對一"
>Day 15. Eloquent Relationships 一對一&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>One To Many&lt;/td>
&lt;td>多對多&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day16-eloquent-relationships-one-to-many" title="Day 16. Eloquent Relationships 一對多"
>Day 16. Eloquent Relationships 一對多&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Many To Many&lt;/td>
&lt;td>多對多&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day17-eloquent-relationships-many-to-many" title="Day 17. Eloquent Relationships 多對多"
>Day 17. Eloquent Relationships 多對多&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Polymorphic One To One&lt;/td>
&lt;td>多態的一對一&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day18-eloquent-relationships-polymorphic-one-to-one" title="Day 18. Eloquent Polymorphic Relationships 多態的一對一"
>Day 18. Eloquent Polymorphic Relationships 多態的一對一&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Polymorphic One To Many&lt;/td>
&lt;td>多態的一對多&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day19-eloquent-relationships-polymorphic-one-to-many" title="Day 19. Eloquent Polymorphic Relationships 多態的一對多"
>Day 19. Eloquent Polymorphic Relationships 多態的一對多&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Polymorphic Many To Many&lt;/td>
&lt;td>多態的多對多&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day20-eloquent-relationships-polymorphic-many-to-many" title="Day 20. Eloquent Polymorphic Relationships 多態的多對多"
>Day 20. Eloquent Polymorphic Relationships 多態的多對多&lt;/a>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="主要內容">主要內容&lt;/h2>
&lt;p>&lt;a class="link" href="https://laravel.com/docs/7.x/eloquent-relationships#one-to-one-polymorphic-relations" target="_blank" rel="noopener"
>文件&lt;/a>&lt;/p>
&lt;h3 id="表的關係">表的關係&lt;/h3>
&lt;p>貼文有一張圖片、使用者也有一張圖片&lt;br>
我可以透過第3張表去存取圖片&lt;br>
資料表關係如下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">users
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id - integer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name - string
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">posts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id - integer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name - string
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">images
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id - integer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> url - string
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> imageable_id - integer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> imageable_type - string
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="../../images/laravel7-30days/day18/polymorphic-one-to-one.jpeg"
loading="lazy"
>&lt;/p>
&lt;h3 id="model-設定">Model 設定&lt;/h3>
&lt;p>&lt;code>app/Models/Image.php&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Image&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Model&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">imageable&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">morphTo&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>app/Models/User.php&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">User&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Model&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">image&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">morphOne&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Image&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;imageable&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>app/Models/Post.php&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Post&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Model&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">image&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">morphOne&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Image&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;imageable&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="如何使用">如何使用&lt;/h3>
&lt;ul>
&lt;li>取得&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 會員取得圖片
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nv">$user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">User&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$image&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$user&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">image&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$image&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Image&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$imageable&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$image&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">imageable&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Day 17. Eloquent Relationships 多對多</title><link>https://www.chihyu.me/2022/11/laravel7-30days-day17-eloquent-relationships-many-to-many/</link><pubDate>Thu, 17 Nov 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/11/laravel7-30days-day17-eloquent-relationships-many-to-many/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post Day 17. Eloquent Relationships 多對多" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>上一篇: &lt;a class="link" href="../../2022/11/laravel7-30days-day16-eloquent-relationships-one-to-many" title="Day 16. Eloquent Relationships 一對多"
>Day 16. Eloquent Relationships 一對多&lt;/a>&lt;br>
今天要來分享 多對多&lt;/p>
&lt;h2 id="關聯表文章區">關聯表文章區&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>關聯&lt;/th>
&lt;th>名稱&lt;/th>
&lt;th>傳送門&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>One To One&lt;/td>
&lt;td>一對一&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day15-eloquent-relationships-one-to-one" title="Day 15. Eloquent Relationships 一對一"
>Day 15. Eloquent Relationships 一對一&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>One To Many&lt;/td>
&lt;td>多對多&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day16-eloquent-relationships-one-to-many" title="Day 16. Eloquent Relationships 一對多"
>Day 16. Eloquent Relationships 一對多&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Many To Many&lt;/td>
&lt;td>多對多&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day17-eloquent-relationships-many-to-many" title="Day 17. Eloquent Relationships 多對多"
>Day 17. Eloquent Relationships 多對多&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Polymorphic One To One&lt;/td>
&lt;td>多態的一對一&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day18-eloquent-relationships-polymorphic-one-to-one" title="Day 18. Eloquent Polymorphic Relationships 多態的一對一"
>Day 18. Eloquent Polymorphic Relationships 多態的一對一&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Polymorphic One To Many&lt;/td>
&lt;td>多態的一對多&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day19-eloquent-relationships-polymorphic-one-to-many" title="Day 19. Eloquent Polymorphic Relationships 多態的一對多"
>Day 19. Eloquent Polymorphic Relationships 多態的一對多&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Polymorphic Many To Many&lt;/td>
&lt;td>多態的多對多&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day20-eloquent-relationships-polymorphic-many-to-many" title="Day 20. Eloquent Polymorphic Relationships 多態的多對多"
>Day 20. Eloquent Polymorphic Relationships 多態的多對多&lt;/a>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="many-to-many-多對多">Many To many (多對多)&lt;/h2>
&lt;p>&lt;a class="link" href="https://laravel.com/docs/7.x/eloquent-relationships#many-to-many" target="_blank" rel="noopener"
>文件&lt;/a>&lt;/p>
&lt;h3 id="表的關係">表的關係&lt;/h3>
&lt;p>資料表關係如下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">users
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id - integer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name - string
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">roles
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id - integer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name - string
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">role_user
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> user_id - integer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> role_id - integer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="../../images/laravel7-30days/day17/many-to-many.jpeg"
loading="lazy"
>&lt;/p>
&lt;h3 id="model-設定">Model 設定&lt;/h3>
&lt;p>&lt;code>app/Models/User.php&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">User&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Model&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">roles&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">belongsToMany&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Role&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>app/Models/Role.php&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Role&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Model&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">users&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">belongsToMany&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="如何使用">如何使用&lt;/h3>
&lt;ul>
&lt;li>取得&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 會員取得角色
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nv">$user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">User&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$roles&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$user&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">roles&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>新增 / 修改 / 刪除&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">App\User&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$rolesId&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 新增 attach
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nv">$user&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">roles&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">attach&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$rolesId&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 刪除 detach
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nv">$user&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">roles&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">detach&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$rolesId&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># sync 自動新增、刪除
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nv">$user&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">roles&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">sync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$rolesId&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>&lt;code>snyc&lt;/code> 會自動判斷 要新增還是刪除，滿方便的&lt;/p>
&lt;/blockquote>
&lt;h2 id="進階">進階&lt;/h2>
&lt;h3 id="中間表加入時間戳">中間表加入時間戳&lt;/h3>
&lt;p>預設的中間表只有 兩個有關係表的ID，時間戳要自己加&lt;br>
加也很容易，就是關聯的時候加上 &lt;code>withTimestamps()&lt;/code> 就可以&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">return&lt;/span> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">belongsToMany&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Role&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">withTimestamps&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="自定義使用中間表">自定義使用中間表&lt;/h3>
&lt;p>我們預設使用中間表都是使用 &lt;code>pivot&lt;/code>&lt;br>
使用方式如下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">User&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">foreach&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">$user&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">roles&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="nv">$role&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">echo&lt;/span> &lt;span class="nv">$role&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">pivot&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">created_at&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>所以如果要字定義的話可以再關聯的時候使用 &lt;code>as&lt;/code>
參考一下範例&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">return&lt;/span> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">belongsToMany&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Role&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">as&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;rrr&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">withTimestamps&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用的時候就會變成 &amp;hellip;&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">foreach&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">$user&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">roles&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="nv">$role&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">echo&lt;/span> &lt;span class="nv">$role&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">rrr&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">created_at&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="自訂中間表">自訂中間表&lt;/h3>
&lt;p>中間表(pivot) 官方會有預設的表名，&lt;br>
就是兩個關係表的表名，字母在前面的是前面&lt;br>
如&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">users - role_user - roles
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">aaa - aaa_bbb - bbb
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>但其實有時候會不是妳要的名稱&lt;br>
所以我們可以建 pivot
會員以及角色中間表 role_user 預設就是 RoleUser&lt;br>
如果妳希望是 UserRole 的話 &amp;hellip;&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">php artisan make:model UserRole -p
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>關聯的時候使用 &lt;code>using()&lt;/code> 就可以了&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">return&lt;/span> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">belongsToMany&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Role&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">using&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">UserRole&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">as&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;rrr&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">withTimestamps&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="結語">結語&lt;/h2>
&lt;p>當初我要理解多對多也卡很久&lt;br>
後來也是參考 Laravel Daily 的影片才會使用&lt;/p>
&lt;p>附上連結: &lt;a class="link" href="https://www.youtube.com/watch?v=V5xINbA-z9o&amp;amp;t=1s&amp;amp;ab_channel=LaravelDaily" target="_blank" rel="noopener"
>Laravel Daily Pivot Table&lt;/a>&lt;/p></description></item><item><title>Day 16. Eloquent Relationships 一對多</title><link>https://www.chihyu.me/2022/11/laravel7-30days-day16-eloquent-relationships-one-to-many/</link><pubDate>Wed, 16 Nov 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/11/laravel7-30days-day16-eloquent-relationships-one-to-many/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post Day 16. Eloquent Relationships 一對多" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>上一篇: &lt;a class="link" href="../../2022/11/laravel7-30days-day15-eloquent-relationships-one-to-one" title="Day 15. Eloquent Relationships 一對一"
>Day 15. Eloquent Relationships 一對一&lt;/a>&lt;br>
今天要來分享 一對多&lt;/p>
&lt;h2 id="關聯表文章區">關聯表文章區&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>關聯&lt;/th>
&lt;th>名稱&lt;/th>
&lt;th>傳送門&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>One To One&lt;/td>
&lt;td>一對一&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day15-eloquent-relationships-one-to-one" title="Day 15. Eloquent Relationships 一對一"
>Day 15. Eloquent Relationships 一對一&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>One To Many&lt;/td>
&lt;td>多對多&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day16-eloquent-relationships-one-to-many" title="Day 16. Eloquent Relationships 一對多"
>Day 16. Eloquent Relationships 一對多&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Many To Many&lt;/td>
&lt;td>多對多&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day17-eloquent-relationships-many-to-many" title="Day 17. Eloquent Relationships 多對多"
>Day 17. Eloquent Relationships 多對多&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Polymorphic One To One&lt;/td>
&lt;td>多態的一對一&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day18-eloquent-relationships-polymorphic-one-to-one" title="Day 18. Eloquent Polymorphic Relationships 多態的一對一"
>Day 18. Eloquent Polymorphic Relationships 多態的一對一&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Polymorphic One To Many&lt;/td>
&lt;td>多態的一對多&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day19-eloquent-relationships-polymorphic-one-to-many" title="Day 19. Eloquent Polymorphic Relationships 多態的一對多"
>Day 19. Eloquent Polymorphic Relationships 多態的一對多&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Polymorphic Many To Many&lt;/td>
&lt;td>多態的多對多&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day20-eloquent-relationships-polymorphic-many-to-many" title="Day 20. Eloquent Polymorphic Relationships 多態的多對多"
>Day 20. Eloquent Polymorphic Relationships 多態的多對多&lt;/a>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="one-to-many-一對多">One To many (一對多)&lt;/h2>
&lt;p>&lt;a class="link" href="https://laravel.com/docs/7.x/eloquent-relationships#one-to-many" target="_blank" rel="noopener"
>文件&lt;/a>&lt;br>
這裡因為我沒有想到，合適的架構所以就參考官方的表格關係，&lt;br>
我們假設一個貼文有多個留言，&lt;/p>
&lt;h3 id="表的關係">表的關係&lt;/h3>
&lt;p>資料表關係如下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">posts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id - integer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name - string
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">comments
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id - integer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> post_id integer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="../../images/laravel7-30days/day16/one-to-many.jpeg"
loading="lazy"
>&lt;/p>
&lt;h3 id="model-設定">Model 設定&lt;/h3>
&lt;p>&lt;code>app/Models/Post.php&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Post&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Model&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">comments&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">hasMany&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">UserProfile&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>app/Models/Comment.php&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Comment&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Model&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">post&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">belongesTo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Post&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>這些 Model 關聯可以自定義欄位關聯，只是我都是使用預設的，&lt;br>
跟著 Laravel 的設計走，就輕鬆很多&lt;br>
不用額外指定欄位&lt;/p>
&lt;p>舉例自定義&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">user&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">belongsTo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;foreign_key&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;other_key&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="如何使用">如何使用&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 文章取得留言
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nv">$post&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Post&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$comments&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$post&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">comments&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 留言取得文章
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nv">$comment&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Comment&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$post&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$comment&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">post&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="小建議">小建議&lt;/h3>
&lt;p>我個人習慣 一對多的時候 function name會使用複數， 多對一的時候會使用單數&lt;br>
如此一來使用上就更符合語意&lt;/p></description></item><item><title>Day 15. Eloquent Relationships 一對一</title><link>https://www.chihyu.me/2022/11/laravel7-30days-day15-eloquent-relationships-one-to-one/</link><pubDate>Tue, 15 Nov 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/11/laravel7-30days-day15-eloquent-relationships-one-to-one/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post Day 15. Eloquent Relationships 一對一" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>上一篇: &lt;a class="link" href="../../2022/11/laravel7-30days-day14-middleware" title="Day 14. 中介層 Middleware"
>Day 14. 中介層 Middleware&lt;/a>&lt;br>
我們準備要來介紹 Laravel ORM 的 Relationships 了&lt;br>
這階段我會區分比較多天來分享&lt;/p>
&lt;h2 id="有哪些關聯">有哪些關聯？&lt;/h2>
&lt;p>先附上&lt;a class="link" href="https://laravel.com/docs/7.x/eloquent-relationships" title="文件"
target="_blank" rel="noopener"
>文件&lt;/a>&lt;br>
以下是官方文件提供的所有關聯&lt;/p>
&lt;ul>
&lt;li>Defining Relationships
&lt;ul>
&lt;li>One To One&lt;/li>
&lt;li>One To Many&lt;/li>
&lt;li>Many To Many&lt;/li>
&lt;li>Defining Custom Intermediate Table Models&lt;/li>
&lt;li>Has One Through&lt;/li>
&lt;li>Has Many Through&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Polymorphic Relationships
&lt;ul>
&lt;li>One To One&lt;/li>
&lt;li>One To Many&lt;/li>
&lt;li>Many To Many&lt;/li>
&lt;li>Custom Polymorphic Types&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>先簡單介紹一下，還有我們不會全部都講&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>本次分享&lt;/th>
&lt;th>關聯&lt;/th>
&lt;th>名稱&lt;/th>
&lt;th>會分享?&lt;/th>
&lt;th>備註&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>✅&lt;/td>
&lt;td>One To One&lt;/td>
&lt;td>一對一&lt;/td>
&lt;td>⭕&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>One To Many&lt;/td>
&lt;td>多對多&lt;/td>
&lt;td>⭕&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>Many To Many&lt;/td>
&lt;td>多對多&lt;/td>
&lt;td>⭕&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>Custom&lt;/td>
&lt;td>自定義關聯&lt;/td>
&lt;td>❌&lt;/td>
&lt;td>太深奧，原本的就滿夠用&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>Has One Through&lt;/td>
&lt;td>一對一(多一層)&lt;/td>
&lt;td>❌&lt;/td>
&lt;td>概念與一對一相同，就只是多一層&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>Has Many Through&lt;/td>
&lt;td>一對多(多一層)&lt;/td>
&lt;td>❌&lt;/td>
&lt;td>概念與一對多相同，就只是多一層&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>Polymorphic One To One&lt;/td>
&lt;td>多態的一對一&lt;/td>
&lt;td>⭕&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>Polymorphic One To Many&lt;/td>
&lt;td>多態的一對多&lt;/td>
&lt;td>⭕&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>Polymorphic Many To Many&lt;/td>
&lt;td>多態的多對多&lt;/td>
&lt;td>⭕&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>Custom Polymorphic Types&lt;/td>
&lt;td>多態的自定義關聯&lt;/td>
&lt;td>❌&lt;/td>
&lt;td>太深奧，原本的就滿夠用&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="關聯表文章區">關聯表文章區&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>關聯&lt;/th>
&lt;th>名稱&lt;/th>
&lt;th>傳送門&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>One To One&lt;/td>
&lt;td>一對一&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day15-eloquent-relationships-one-to-one" title="Day 15. Eloquent Relationships 一對一"
>Day 15. Eloquent Relationships 一對一&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>One To Many&lt;/td>
&lt;td>多對多&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day16-eloquent-relationships-one-to-many" title="Day 16. Eloquent Relationships 一對多"
>Day 16. Eloquent Relationships 一對多&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Many To Many&lt;/td>
&lt;td>多對多&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day17-eloquent-relationships-many-to-many" title="Day 17. Eloquent Relationships 多對多"
>Day 17. Eloquent Relationships 多對多&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Polymorphic One To One&lt;/td>
&lt;td>多態的一對一&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day18-eloquent-relationships-polymorphic-one-to-one" title="Day 18. Eloquent Polymorphic Relationships 多態的一對一"
>Day 18. Eloquent Polymorphic Relationships 多態的一對一&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Polymorphic One To Many&lt;/td>
&lt;td>多態的一對多&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day19-eloquent-relationships-polymorphic-one-to-many" title="Day 19. Eloquent Polymorphic Relationships 多態的一對多"
>Day 19. Eloquent Polymorphic Relationships 多態的一對多&lt;/a>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Polymorphic Many To Many&lt;/td>
&lt;td>多態的多對多&lt;/td>
&lt;td>&lt;a class="link" href="../../2022/11/laravel7-30days-day20-eloquent-relationships-polymorphic-many-to-many" title="Day 20. Eloquent Polymorphic Relationships 多態的多對多"
>Day 20. Eloquent Polymorphic Relationships 多態的多對多&lt;/a>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="one-to-one-一對一">One To One (一對一)&lt;/h2>
&lt;p>&lt;a class="link" href="https://laravel.com/docs/7.x/eloquent-relationships#one-to-one" target="_blank" rel="noopener"
>文件&lt;/a>&lt;/p>
&lt;h3 id="表的關係">表的關係&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">users
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id - integer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name - string
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">user_profiles
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id - integer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> user_id integer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="../../images/laravel7-30days/day15/one-to-one.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>上次我們有建使用者基本資料 &lt;code>user_profiles&lt;/code>他們關係可以參考圖片，&lt;br>
&lt;strong>一個使用者只會對應到一個基本資料&lt;/strong>&lt;/p>
&lt;h3 id="model-設定">Model 設定&lt;/h3>
&lt;p>所以我們可以去設定我們的 Model&lt;/p>
&lt;p>&lt;code>app/Models/User.php&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">User&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Authenticatable&lt;/span> &lt;span class="k">implements&lt;/span> &lt;span class="nx">MustVerifyEmail&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">profile&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">hasOne&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">UserProfile&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>app/Models/UserProfile.php&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">UserProfile&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Model&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">user&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">belongesTo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="如何使用">如何使用&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">User&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$profile&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$user&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">profile&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>這樣就能成功取得使用者的基本資料了&lt;/p></description></item><item><title>Day 14. 中介層 Middleware</title><link>https://www.chihyu.me/2022/11/laravel7-30days-day14-middleware/</link><pubDate>Mon, 14 Nov 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/11/laravel7-30days-day14-middleware/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post Day 14. 中介層 Middleware" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;p>上一篇: &lt;a class="link" href="../../2022/11/laravel7-30days-day13-user-profile" title="Day 13. 第二個頁面: 個人資料維護"
>Day 13. 第二個頁面: 個人資料維護&lt;/a>&lt;br>
今天來跟大家分享 中介層 - Middleware
先前我們宣告路由直接指向負責的 Controller 以及 Function，&lt;br>
有時候可能會有一些資料的預處理或者是權限的設定&lt;br>
如: 這個頁面需要先登入才能使用 &amp;hellip;&lt;/p>
&lt;p>這時候就可以使用 middleware 處理這一段
Laravel 也有提供一些預設的 middleware&lt;br>
今天我們先著重聊 middleware 基本設定以及使用&lt;br>
之後在教大家自定義&lt;/p>
&lt;h2 id="設定檔">設定檔&lt;/h2>
&lt;p>我們可以先看到 &lt;code>/app/Http/Kernel.php&lt;/code> 是設定 middleware 的地方&lt;br>
檔案裏面會看到3個 array&lt;/p>
&lt;h3 id="全域-middleware">全域 middleware&lt;/h3>
&lt;p>&lt;code>$middleware&lt;/code> 這是全域的，只要設定在這每個頁面都會執行&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">protected&lt;/span> &lt;span class="nv">$middleware&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// \App\Http\Middleware\TrustHosts::class,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">\App\Http\Middleware\TrustProxies&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">\Fruitcake\Cors\HandleCors&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">\App\Http\Middleware\CheckForMaintenanceMode&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">\Illuminate\Foundation\Http\Middleware\ValidatePostSize&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">\App\Http\Middleware\TrimStrings&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">\Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="群組-middleware">群組 middleware&lt;/h3>
&lt;p>&lt;code>$middlewareGroups&lt;/code> 這是群組的，可以將你設定的 middleware 分群，&lt;br>
就可以不用一個一個使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">protected&lt;/span> &lt;span class="nv">$middlewareGroups&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;web&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">\App\Http\Middleware\EncryptCookies&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">\Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">\Illuminate\Session\Middleware\StartSession&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// \Illuminate\Session\Middleware\AuthenticateSession::class,
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">\Illuminate\View\Middleware\ShareErrorsFromSession&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">\App\Http\Middleware\VerifyCsrfToken&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">\Illuminate\Routing\Middleware\SubstituteBindings&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;api&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;throttle:60,1&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">\Illuminate\Routing\Middleware\SubstituteBindings&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>官方預設 &lt;code>route/web.php&lt;/code> 就吃他的 &lt;code>web&lt;/code> 群組，可以參考 &lt;code>/app/Providers/RouteServiceProvider.php&lt;/code> 得知&lt;/p>
&lt;/blockquote>
&lt;h3 id="指派給路由的-middleware">指派給路由的 Middleware&lt;/h3>
&lt;p>&lt;code>$routeMiddleware&lt;/code> 這是設定在路由的，也可以設定在 controller 的 &lt;code>__construct()&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">protected&lt;/span> &lt;span class="nv">$routeMiddleware&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;auth&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nx">\App\Http\Middleware\Authenticate&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;auth.basic&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nx">\Illuminate\Auth\Middleware\AuthenticateWithBasicAuth&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;bindings&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nx">\Illuminate\Routing\Middleware\SubstituteBindings&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;cache.headers&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nx">\Illuminate\Http\Middleware\SetCacheHeaders&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;can&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nx">\Illuminate\Auth\Middleware\Authorize&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;guest&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nx">\App\Http\Middleware\RedirectIfAuthenticated&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;password.confirm&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nx">\Illuminate\Auth\Middleware\RequirePassword&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;signed&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nx">\Illuminate\Routing\Middleware\ValidateSignature&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;throttle&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nx">\Illuminate\Routing\Middleware\ThrottleRequests&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;verified&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nx">\Illuminate\Auth\Middleware\EnsureEmailIsVerified&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="使用">使用&lt;/h2>
&lt;p>使用的方法有很多種，
我習慣把 middleware 設定在 route，這樣能一目了然知道哪些地方有 middleware &lt;br>
像我們上次編輯個人資料頁，只有登入後才能使用，&lt;br>
這時候可以設定 &lt;code>auth&lt;/code> 的 middleware&lt;/p>
&lt;h3 id="方法一-route">方法一 (route)&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">group&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="s1">&amp;#39;prefix&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;profile&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;as&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;profile.&amp;#39;&lt;/span> &lt;span class="p">],&lt;/span> &lt;span class="k">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;ProfileController@edit&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;edit&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">post&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;ProfileController@update&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;update&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">})&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">middleware&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;auth&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="方法二-route">方法二 (route)&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">group&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="s1">&amp;#39;prefix&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;profile&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;as&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;profile.&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;middleware&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;auth&amp;#39;&lt;/span> &lt;span class="p">],&lt;/span> &lt;span class="k">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;ProfileController@edit&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;edit&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">post&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;ProfileController@update&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;update&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="方法三-controller">方法三 (controller)&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">ProfileController&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Controller&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="fm">__construct&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">middleware&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;auth&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="測試">測試&lt;/h3>
&lt;p>這時候打開無痕頁面直接執行 &lt;code>/profile&lt;/code> 頁面就會直接被導向登入頁了！&lt;/p></description></item><item><title>Day 13. 第二個頁面: 個人資料維護</title><link>https://www.chihyu.me/2022/11/laravel7-30days-day13-user-profile/</link><pubDate>Sun, 13 Nov 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/11/laravel7-30days-day13-user-profile/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post Day 13. 第二個頁面: 個人資料維護" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;p>上一篇: &lt;a class="link" href="../../2022/11/laravel7-30days-day12-eloquent" title="Day 12. Eloquent: Model"
>Day 12. Eloquent: Model&lt;/a>&lt;br>
今天我們要做第二個頁面了&lt;/p>
&lt;h2 id="主要">主要&lt;/h2>
&lt;p>這次要來更新個人資料，&lt;br>
我們把會員跟個人資料表分開，所以這次要更新兩張表 &lt;code>users&lt;/code>、 &lt;code>user_profiles&lt;/code>&lt;/p>
&lt;h3 id="建立-route">建立 route&lt;/h3>
&lt;p>開啟檔案 &lt;code>route/web.php&lt;/code> 設定路由&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">group&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="s1">&amp;#39;prefix&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;profile&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;as&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;profile.&amp;#39;&lt;/span> &lt;span class="p">],&lt;/span> &lt;span class="k">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;ProfileController@edit&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;edit&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">post&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;ProfileController@update&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;update&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="建立-controller">建立 controller&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">php artisan make:controller ProfileController
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="建立-controller-function-們">建立 controller function 們&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">ProfileController&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Controller&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sd">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * 顯示
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">edit&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sd">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * update
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Request&lt;/span> &lt;span class="nv">$reqest&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="建立-view及入口">建立 view及入口&lt;/h3>
&lt;p>我把入口放在右上角登出的下拉選單中,&lt;br>
&lt;code>route('profile.edit')&lt;/code> 為我們剛剛設定的路由的名稱&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;dropdown-menu dropdown-menu-right&amp;#34;&lt;/span> &lt;span class="na">aria-labelledby&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;navbarDropdown&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c">&amp;lt;!-- ... --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;dropdown-item&amp;#34;&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;{{ route(&amp;#39;profile.edit&amp;#39;) }}&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 個人資料維護
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c">&amp;lt;!-- ... --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="建立-view">建立 view&lt;/h3>
&lt;p>我是直接複製 &lt;code>home.blade.php&lt;/code> 的內容變 &lt;code>profile.blade.php&lt;/code>&lt;br>
&lt;code>old()&lt;/code> 是 Laravel 表單的神奇魔法可以保留送出的值，&lt;br>
之後 驗證(validation) 的單元會詳細解說&lt;/p>
&lt;p>&lt;img src="../../images/laravel7-30days/day13/profile-view.jpeg"
loading="lazy"
>&lt;/p>
&lt;h3 id="調整-profilecontroller-的-edit">調整 ProfileController 的 edit()&lt;/h3>
&lt;p>&lt;code>view('profile', compact('user'))&lt;/code> 為顯示 view 的畫面,&lt;br>
第一個參數是 view 的頁面，第二個參數是要傳入的參數&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">use&lt;/span> &lt;span class="nx">Illuminate\Support\Facades\Auth&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">ProfileController&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Controller&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">edit&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Auth&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">user&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">view&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;profile&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">compact&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;user&amp;#39;&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>&lt;code>Auth&lt;/code> 為目前登入的使用者，記得要 &lt;code>use Illuminate\Support\Facades\Auth;&lt;/code> 哦&lt;/p>
&lt;/blockquote>
&lt;h3 id="調整-profilecontroller-的-update">調整 ProfileController 的 update()&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">ProfileController&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Controller&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Request&lt;/span> &lt;span class="nv">$reqest&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Auth&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">user&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$user&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">update&lt;/span>&lt;span class="p">([&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$reqest&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">UserProfile&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">updateOrCreate&lt;/span>&lt;span class="p">([&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;user_id&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$user&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;gender&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$reqest&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">gender&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;birthday&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$reqest&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">birthday&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;address&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$reqest&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">address&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">session&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">flash&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;status&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;更新成功。&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">redirect&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">route&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;home&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>這樣就完成簡單的會員基本資料更新了。&lt;/p>
&lt;/blockquote></description></item><item><title>Day 12. Eloquent: Model</title><link>https://www.chihyu.me/2022/11/laravel7-30days-day12-eloquent/</link><pubDate>Sat, 12 Nov 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/11/laravel7-30days-day12-eloquent/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post Day 12. Eloquent: Model" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>上一篇: &lt;a class="link" href="../../2022/11/laravel7-30days-day11-migration" title="Day 11. 建立資料表: Migration"
>Day 11. 建立資料表: Migration&lt;/a>&lt;br>
今天來分享 Laravel 的 model 名為 Eloquent ORM&lt;/p>
&lt;h2 id="主要">主要&lt;/h2>
&lt;p>&lt;a class="link" href="https://laravel.com/docs/7.x/eloquent" target="_blank" rel="noopener"
>上！文！件！&lt;/a>&lt;br>
Eloquent 也是我覺得 Laravel 很香的原因之一，&lt;br>
這邊簡單介紹一下，關聯的部份之後再獨立聊&lt;/p>
&lt;h2 id="基本設定">基本設定&lt;/h2>
&lt;p>&lt;a class="link" href="https://laravel.com/docs/7.x/eloquent#eloquent-model-conventions" target="_blank" rel="noopener"
>基本設定文件&lt;/a>&lt;/p>
&lt;h3 id="自定義-table-name">自定義 Table Name&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">User&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Model&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">protected&lt;/span> &lt;span class="nv">$table&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;user_list&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="自定義-primary-keys">自定義 Primary Keys&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">User&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Model&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">protected&lt;/span> &lt;span class="nv">$primaryKey&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;pid&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="軟刪除">軟刪除&lt;/h2>
&lt;p>我們常常會設定軟刪除在大部分的表，因為避免資料刪除後無法回溯問題，&lt;br>
這時候我們就需要在 Model &lt;code>use SoftDeletes;&lt;/code> 當然我要還要設定 migration &lt;code>$table-&amp;gt;softDeletes();&lt;/code>&lt;/p>
&lt;h3 id="migration">migration&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">CreateUsersTable&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Migration&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sd">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * Run the migrations.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> *
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * @return void
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">up&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Schema&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;users&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">Blueprint&lt;/span> &lt;span class="nv">$table&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$table&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">id&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$table&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$table&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;email&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">unique&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$table&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">timestamp&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;email_verified_at&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">nullable&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$table&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;password&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$table&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">rememberToken&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$table&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">timestamps&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$table&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">softDeletes&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="c1">// *** 這個
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sd">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * Reverse the migrations.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> *
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * @return void
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">down&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Schema&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">dropIfExists&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;users&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="model">model&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">use&lt;/span> &lt;span class="nx">Illuminate\Database\Eloquent\Model&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">use&lt;/span> &lt;span class="nx">Illuminate\Database\Eloquent\SoftDeletes&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">User&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Model&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">use&lt;/span> &lt;span class="nx">SoftDeletes&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// *** 這個
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="方便的方法們">方便的方法們&lt;/h2>
&lt;h3 id="搜尋-find">搜尋 find()&lt;/h3>
&lt;p>find 可以直接找 Primary Keys&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">User&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="新增-create">新增 create()&lt;/h3>
&lt;p>傳入整個 array&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">User&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">create&lt;/span>&lt;span class="p">([&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;abc&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="更新-update">更新 update()&lt;/h3>
&lt;p>傳入整個 array&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">User&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$user&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">update&lt;/span>&lt;span class="p">([&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;abc&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="直接存-save">直接存 save()&lt;/h3>
&lt;p>也分以單獨存取最後再 &lt;code>save()&lt;/code> 就好。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">User&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$user&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;abc&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$user&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">save&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="更新或刪除-updateorcreate">更新或刪除 updateOrCreate()&lt;/h3>
&lt;p>顧名思義就是找不到我就新增，找得到我就修改&lt;br>
第一個參數是條件，&lt;br>
第二個參數是值&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">User&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">updateOrCreate&lt;/span>&lt;span class="p">([&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;id&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">],&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;abc&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="刪除-delete">刪除 delete()&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">User&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$user&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">delete&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="常用的條件-scopes">常用的條件 Scopes&lt;/h2>
&lt;p>有些比較常用搜尋條件可以透過這個&lt;br>
Scopes 分成 global 跟 local&lt;br>
我這邊只介紹 local， global 基本上用不到&lt;br>
global Scopes 是全域的概念，每次Query 都會附加上去的 搜尋條件&lt;br>
方法如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">User&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Model&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sd">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * Scope a query to only include active users.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> *
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * @param \Illuminate\Database\Eloquent\Builder $query
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * @return \Illuminate\Database\Eloquent\Builder
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">scopeActive&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$query&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nv">$query&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;active&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 使用方法
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">active&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Day 11. 建立資料表: Migration</title><link>https://www.chihyu.me/2022/11/laravel7-30days-day11-migration/</link><pubDate>Fri, 11 Nov 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/11/laravel7-30days-day11-migration/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post Day 11. 建立資料表: Migration" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;p>上一篇: &lt;a class="link" href="../../2022/11/laravel7-30days-day10-auth-reset-password" title="Day 10. Authentication-3 忘記密碼/重設密碼"
>Day 10. Authentication-3 忘記密碼/重設密碼&lt;/a>&lt;br>
結束會員註冊登入流程&lt;br>
準備要來跟大家聊聊 Model&lt;br>
聊 Model 之前，先分享一下用來建立資料表的工具 - Migration，&lt;/p>
&lt;h2 id="主要">主要&lt;/h2>
&lt;p>一樣，上&lt;a class="link" href="https://laravel.com/docs/7.x/migrations" title="Migration Doc"
target="_blank" rel="noopener"
>文件&lt;/a>&lt;/p>
&lt;p>我們平常 寫 code 版控有 &lt;code>git&lt;/code> 可以追蹤 code 的版本及異動，&lt;br>
migration 簡單說就是資料表的 &lt;code>git&lt;/code>、資料表的版本控制 &lt;br>
Laravel 會透過這些 migration 的檔案們，執行對資料表的異動&lt;/p>
&lt;h2 id="建立-migration">建立 migration&lt;/h2>
&lt;h3 id="modelmigration-一起建立">Model、migration 一起建立&lt;/h3>
&lt;p>平常我都是建立 model 順便建立 mgiration&lt;br>
假設我今天要建立一個 UserProfile，
只要在 &lt;code>make:model&lt;/code> 時 &lt;code>-m&lt;/code> 就會一起產生 migration 相對省事&lt;br>
指令&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">php artisan make:model Models/UserProfile -m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="../../images/laravel7-30days/day11/make-model-with-migration.jpeg"
loading="lazy"
>&lt;/p>
&lt;h3 id="也可以單獨-建立-migrationmodel">也可以單獨 建立 migration、Model&lt;/h3>
&lt;ol>
&lt;li>migration
命名規則是這樣的 &lt;code>create_&amp;lt;table_name&amp;gt;_table&lt;/code>&lt;br>
&lt;code>/database/migrations/&lt;/code> 就會產生對應的檔案&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">php artisan make:migration create_user_profiles_table
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>Model&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">php artisan make:model Model/UserProfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="編輯-migration">編輯 migration&lt;/h2>
&lt;p>這裡我們先略過 Model 不談，執行完上面後就可以編輯你們的 Migration 了&lt;/p>
&lt;p>檔案 &lt;code>database/migrations/2022_11_14_122200_create_user_profiles_table.php&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">CreateUserProfilesTable&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Migration&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">up&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Schema&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">create&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;user_profiles&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">Blueprint&lt;/span> &lt;span class="nv">$table&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$table&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">id&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$table&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">timestamps&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">down&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Schema&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">dropIfExists&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;user_profiles&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>這邊你會看到兩個 function，&lt;code>up()&lt;/code>、&lt;code>down()&lt;/code>&lt;/p>
&lt;h3 id="up">up()&lt;/h3>
&lt;p>主要放你要執行的資料表結構宣告 ex: varchar、int、date。之類的&lt;/p>
&lt;h3 id="down">down()&lt;/h3>
&lt;p>每次執行一次 migrater就會有一個 batch(版本)&lt;br>
down 就是 rollbak migrate 要使用的被回滾的資料表&lt;br>
這邊都是 create table 所以都是 drop 那個 table&lt;/p>
&lt;h3 id="資料表欄位如何宣告">資料表欄位如何宣告?&lt;/h3>
&lt;p>附上 &lt;a class="link" href="https://laravel.com/docs/7.x/migrations#creating-columns" target="_blank" rel="noopener"
>文件&lt;/a>&lt;br>
裏面有附上所有資料庫的型別，看你需要哪些欄位&lt;/p>
&lt;h3 id="外來鍵">外來鍵&lt;/h3>
&lt;p>外來鍵如果要關聯比較特別 &lt;br>
我都直接這樣宣告&lt;br>
可以參考 &lt;a class="link" href="https://laravel.com/docs/7.x/migrations#foreign-key-constraints" target="_blank" rel="noopener"
>文件&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$table&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">foreignId&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;user_id&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">constrained&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;users&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">onUpdate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;cascade&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">onDelete&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;cascade&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// $table
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// -&amp;gt;foreignId(&amp;#39;&amp;lt;你的欄位名稱&amp;gt;&amp;#39;)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// -&amp;gt;constrained(&amp;#39;&amp;lt;你要關聯的表&amp;gt;&amp;#39;)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// -&amp;gt;onUpdate(&amp;#39;cascade&amp;#39;)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// -&amp;gt;onDelete(&amp;#39;cascade&amp;#39;);
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="table註解">Table註解&lt;/h3>
&lt;p>基本上我每個上去的欄位都會註解，table 也不例外&lt;br>
不過 Laravel Migration 沒有表的註解&lt;br>
所以我都透過 DB class 直接對表註解&lt;br>
指令如下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// use
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">use&lt;/span> &lt;span class="nx">Illuminate\Support\Facades\DB&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Table註解
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">DB&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">statement&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ALTER TABLE `user_profiles` comment &amp;#39;使用者基本資料&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="執行-migration">執行 migration&lt;/h2>
&lt;p>只需要執行這個指令就會依照剛剛建立的產生資料表&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">php artisan migrate
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="後悔了要回滾-table">後悔了要回滾 table&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">php artisan migrate:rollback
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>每次回滾 migration 就是回滾最新的 batch 一次&lt;br>
如果要多版號可以&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 回滾 3 個 batch&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">php artisan migrate:rollback --batch&lt;span class="o">=&lt;/span>&lt;span class="m">3&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果要全部重來可以&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">php artisan migrate:reset
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>基本上除非開發階段，很少會 rollback/reset&lt;/p>
&lt;/blockquote>
&lt;h2 id="捲土重來">捲土重來&lt;/h2>
&lt;p>開發階段很好用的指令，全部回滾再全部重建 refresh&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">php artisan migrate:refresh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>這樣就會全部依照原本的樣子全部重跑，&lt;br>
當然此時的 batch 會全部變成 1 哦，因為重來了&lt;/p>
&lt;h2 id="狀態">狀態&lt;/h2>
&lt;p>可以透過這個指令查看目前執行狀況&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">php artisan migrate:status
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Day 10. Authentication-3 忘記密碼/重設密碼</title><link>https://www.chihyu.me/2022/11/laravel7-30days-day10-auth-reset-password/</link><pubDate>Thu, 10 Nov 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/11/laravel7-30days-day10-auth-reset-password/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post Day 10. Authentication-3 忘記密碼/重設密碼" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;p>上一篇: &lt;a class="link" href="../../2022/11/laravel7-30days-day9-auth-email-verify" title="Day 9. Authentication-2 信箱驗證"
>Day 9. Authentication-2 信箱驗證&lt;/a>
今天來跟大家 忘記密碼/重設密碼&lt;/p>
&lt;h2 id="主要">主要&lt;/h2>
&lt;p>一樣附上文件給大家 &lt;a class="link" href="https://laravel.com/docs/7.x/passwords" title="passwords"
target="_blank" rel="noopener"
>here!&lt;/a>&lt;br>
忘記密碼/重設密碼其實於 &lt;code>php artisan ui bootstrap --auth&lt;/code> 產生時就有了&lt;br>
只是還是簡單帶一下這個功能&lt;/p>
&lt;h2 id="demo">DEMO&lt;/h2>
&lt;h3 id="收信">收信&lt;/h3>
&lt;p>於登入頁面點擊忘記密碼並至信箱收信
&lt;img src="../../images/laravel7-30days/day10/reset-password-email.jpeg"
loading="lazy"
>&lt;/p>
&lt;h3 id="重新設定密碼">重新設定密碼&lt;/h3>
&lt;p>&lt;img src="../../images/laravel7-30days/day10/reset-password-form.jpeg"
loading="lazy"
>
搞定 ！&lt;/p>
&lt;h2 id="結語">結語&lt;/h2>
&lt;p>根據這三篇，基本上就快速的使用 Laravel 會員註冊登入等相關流程了，製作上其實相當便利&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day8-auth-signup-signin" title="Day 8. Authentication-1 登入註冊 "
>Day 8. Authentication-1 登入註冊 &lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day9-auth-email-verify" title="Day 9. Authentication-2 信箱驗證"
>Day 9. Authentication-2 信箱驗證&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day10-auth-reset-password" title="Day 10. Authentication-3 忘記密碼/重設密碼"
>Day 10. Authentication-3 忘記密碼/重設密碼&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Day 9. Authentication-2 信箱驗證</title><link>https://www.chihyu.me/2022/11/laravel7-30days-day9-auth-email-verify/</link><pubDate>Wed, 09 Nov 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/11/laravel7-30days-day9-auth-email-verify/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post Day 9. Authentication-2 信箱驗證" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;p>上一篇: &lt;a class="link" href="../../2022/11/laravel7-30days-day8-auth-signup-signin" title="Day 8. Authentication-1 登入註冊 "
>Day 8. Authentication-1 登入註冊 &lt;/a>&lt;br>
今天來跟大家 信箱驗證&lt;/p>
&lt;h2 id="主要">主要&lt;/h2>
&lt;p>信箱驗證其實也滿簡單的就是依照官方設定即可&lt;br>
一樣附上文件給大家 &lt;a class="link" href="https://laravel.com/docs/7.x/verification" title="verification doc"
target="_blank" rel="noopener"
>here!&lt;/a>&lt;/p>
&lt;h3 id="設定-smtp">設定 smtp&lt;/h3>
&lt;p>開啟 &lt;code>.env&lt;/code> 設定，可以使用自己的 gmail 信箱寄信&lt;br>
可以參考&lt;a class="link" href="https://www.webdesigntooler.com/google-smtp-send-mail" target="_blank" rel="noopener"
>別人分享的教學文&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">MAIL_DRIVER=smtp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MAIL_HOST=smtp.gmail.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MAIL_PORT=465
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MAIL_USERNAME=xxx@gmail.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MAIL_PASSWORD=xxxx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MAIL_ENCRYPTION=ssl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MAIL_FROM_ADDRESS=xxx@gmail.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MAIL_FROM_NAME=&amp;#34;${APP_NAME}&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="設定-user-model">設定 User Model&lt;/h3>
&lt;p>開啟檔案 &lt;code>App\Models\User.php&lt;/code> 加上 &lt;code>implements MustVerifyEmail&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">namespace&lt;/span> &lt;span class="nx">App\Models&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">use&lt;/span> &lt;span class="nx">Illuminate\Contracts\Auth\MustVerifyEmail&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">use&lt;/span> &lt;span class="nx">Illuminate\Foundation\Auth\User&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="nx">Authenticatable&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">use&lt;/span> &lt;span class="nx">Illuminate\Notifications\Notifiable&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">User&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Authenticatable&lt;/span> &lt;span class="k">implements&lt;/span> &lt;span class="nx">MustVerifyEmail&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">use&lt;/span> &lt;span class="nx">Notifiable&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="調整路由">調整路由&lt;/h3>
&lt;p>開啟 &lt;code>routes/web.php&lt;/code> 在 調整&lt;br>
&lt;del>Auth::routes();&lt;/del>&lt;br>
Auth::routes([&amp;lsquo;verify&amp;rsquo; =&amp;gt; true]);&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Auth&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">routes&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="s1">&amp;#39;verify&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="k">true&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="demo">DEMO&lt;/h3>
&lt;p>可以試著註冊看看，&lt;br>
就會收到驗證信了&lt;/p>
&lt;p>&lt;img src="../../images/laravel7-30days/day9/email-verify-demo.jpeg"
loading="lazy"
>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted --></description></item><item><title>Day 8. Authentication-1 登入註冊</title><link>https://www.chihyu.me/2022/11/laravel7-30days-day8-auth-signup-signin/</link><pubDate>Tue, 08 Nov 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/11/laravel7-30days-day8-auth-signup-signin/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post Day 8. Authentication-1 登入註冊" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;p>上一篇: &lt;a class="link" href="../../2022/11/laravel7-30days-day7-blade" title="Day 7. View 的模板引擎: Blade"
>Day 7. View 的模板引擎: Blade&lt;/a>&lt;br>
今天來跟大家 登入與註冊&lt;/p>
&lt;h2 id="主要">主要&lt;/h2>
&lt;p>Laravel 於註冊登入這段其實都做好了，&lt;br>
附上&lt;a class="link" href="https://laravel.com/docs/7.x/authentication" target="_blank" rel="noopener"
>文件&lt;/a>
只要幾個指令再微調一下就可以直接使用了，相當便利&lt;br>
移到目錄下，並依序執行即可&lt;/p>
&lt;h3 id="安裝套件">安裝套件&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">composer require laravel/ui:^2.4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="產生需要的檔案">產生需要的檔案&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">php artisan ui bootstrap --auth
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>php artisan ui&lt;/code> 可以選擇其他驅動，&lt;br>
官方是提供 vue
我個人習慣用 bootstrap
其他的可以參考 &lt;a class="link" href="https://laravel.com/docs/7.x/frontend#introduction" target="_blank" rel="noopener"
>這裡&lt;/a>&lt;/p>
&lt;p>執行完後可以看到 Laravel給你加了一些 Controller、view，&lt;br>
&lt;code>routes/web.php&lt;/code> 則會出現 &lt;code>Auth::routes();&lt;/code>這個就是提供登入註冊的所有路由，&lt;/p>
&lt;blockquote>
&lt;p>若想知道有哪些路由可以透過 &lt;code>php artisan route:list&lt;/code> 確認&lt;/p>
&lt;/blockquote>
&lt;h3 id="畫面的-cssjs">畫面的 css、js&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">npm install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">npm run dev
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>執行到這基本畫面就完成了&lt;/p>
&lt;h3 id="需要準備資料表">需要準備資料表&lt;/h3>
&lt;p>專案剛建立好時，會有 migrations 存放會員等相關的資料表&lt;br>
執行&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">php artisan migrate
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="../../images/laravel7-30days/day8/migration-demo.jpeg"
loading="lazy"
>&lt;/p>
&lt;h3 id="搬移-model-位置">搬移 Model 位置&lt;/h3>
&lt;p>這邊會使用到 Model User 先前有提到 Laravel 7 的 Model 會放在 &lt;code>app/&lt;/code>&lt;br>
我通常會再建一個資料夾於 &lt;code>app/Models&lt;/code> 將 Model 放到裏面 &lt;br>
記得要多檔搜尋，改一下有使用到 User 的地方&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">mkdir app/Models
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv app/User.php app/Models/User.php
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>
&lt;p>修改 &lt;code>app/Models/User.php&lt;/code> 的 namespace 為&lt;/p>
&lt;p>&lt;del>namespace App;&lt;/del>&lt;br>
namespace App\Models;&lt;/p>
&lt;/li>
&lt;li>
&lt;p>修改所有 use App\User;&lt;br>
&lt;img src="../../images/laravel7-30days/day8/app-models-user.jpeg"
loading="lazy"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="demo">DEMO&lt;/h2>
&lt;p>此時回到專案根目錄就可以在右上角看到 &lt;code>LOGIN&lt;/code> 、&lt;code>RIGISTER&lt;/code> 就大功告成了
&lt;img src="../../images/laravel7-30days/day8/home.jpeg"
loading="lazy"
>&lt;/p></description></item><item><title>Day 7. View 的模板引擎: Blade</title><link>https://www.chihyu.me/2022/11/laravel7-30days-day7-blade/</link><pubDate>Mon, 07 Nov 2022 02:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/11/laravel7-30days-day7-blade/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post Day 7. View 的模板引擎: Blade" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;p>上一篇: &lt;a class="link" href="../../2022/11/laravel7-30days-day6-first-view" title="Day 6. 第一個頁面: Controller &amp;amp; View"
>Day 6. 第一個頁面: Controller &amp;amp; View&lt;/a>&lt;br>
今天來跟大家分享模板引擎 Blade 的使用方式&lt;/p>
&lt;h2 id="使用">使用&lt;/h2>
&lt;p>可以先參考 &lt;a class="link" href="https://laravel.com/docs/7.x/blade" title="官方文檔"
target="_blank" rel="noopener"
>官方文檔&lt;/a>&lt;br>
基本語法都是使用 &lt;code>@&lt;/code>&lt;/p>
&lt;p>舉個例子，&lt;br>
我們平常使用的 if&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;?&lt;/span>&lt;span class="nx">php&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">true&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">echo&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span> &lt;span class="k">elseif&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">true&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">echo&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">echo&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">?&amp;gt;&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用blade的話，則是這樣用的&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="o">@&lt;/span>&lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">true&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">@&lt;/span>&lt;span class="k">elseif&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">true&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">@&lt;/span>&lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">@&lt;/span>&lt;span class="k">endif&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="繼承使用-extendsyieldsection">繼承使用 (extends、yield、section)&lt;/h3>
&lt;p>可以建立一個主要的 Blade，把 header、footer 放進去&lt;br>
其他直接使用 &lt;code>@extend&lt;/code> ，如以下範例&lt;/p>
&lt;ul>
&lt;li>主要檔案 &lt;code>resources/views/day7/layouts/app.blade.php&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>App Name - @yield(&amp;#39;title&amp;#39;)&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;container&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @yield(&amp;#39;content&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>動態內容可以使用 &lt;code>@yield&lt;/code> 與 &lt;code>@section&lt;/code> 搭配&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>內容檔案 &lt;code>resources/views/day7/testContent.blade.php&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">@extends(&amp;#39;day7.layouts.app&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@section(&amp;#39;title&amp;#39;, &amp;#39;測試標題&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@section(&amp;#39;content&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>測試內文.&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@endsection
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="直接引入-indclude">直接引入 indclude&lt;/h3>
&lt;p>有些像是 header、footer 就可以使用 &lt;code>@indclude&lt;/code> 的方式直接引入檔案&lt;/p>
&lt;p>以剛剛的 layouts/app 為例&lt;/p>
&lt;ul>
&lt;li>檔案 &lt;code>resources/views/day7/layouts/app.blade.php&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>App Name - @yield(&amp;#39;title&amp;#39;)&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @include(&amp;#39;day7.layouts.header&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;container&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @yield(&amp;#39;content&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>就可以在 &lt;code>resources/views/day7/layouts/header.blade.php&lt;/code> 編寫 header 的內容，
這樣看起來就會更加乾淨一些。&lt;/p>
&lt;h3 id="foreach">foreach&lt;/h3>
&lt;p>另外提一個，我們平常頁面很長會使用 foreach
Laravel 在這一段還提供了 Loop 參數可以使用&lt;br>
可以參考 &lt;a class="link" href="https://laravel.com/docs/7.x/blade#the-loop-variable" target="_blank" rel="noopener"
>loop 參數文件&lt;/a>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Property&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>$loop-&amp;gt;index&lt;/td>
&lt;td>The index of the current loop iteration (starts at 0).&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>$loop-&amp;gt;iteration&lt;/td>
&lt;td>The current loop iteration (starts at 1).&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>$loop-&amp;gt;remaining&lt;/td>
&lt;td>The iterations remaining in the loop.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>$loop-&amp;gt;count&lt;/td>
&lt;td>The total number of items in the array being iterated.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>$loop-&amp;gt;first&lt;/td>
&lt;td>Whether this is the first iteration through the loop.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>$loop-&amp;gt;last&lt;/td>
&lt;td>Whether this is the last iteration through the loop.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>$loop-&amp;gt;even&lt;/td>
&lt;td>Whether this is an even iteration through the loop.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>$loop-&amp;gt;odd&lt;/td>
&lt;td>Whether this is an odd iteration through the loop.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>$loop-&amp;gt;depth&lt;/td>
&lt;td>The nesting level of the current loop.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>$loop-&amp;gt;parent&lt;/td>
&lt;td>When in a nested loop, the parent&amp;rsquo;s loop variable.&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="others">others&lt;/h3>
&lt;ol>
&lt;li>method
之前 &lt;a class="link" href="../../2022/11/laravel7-30days-day5-router" title="Day 5. 路由: Router"
>Day 5. 路由: Router&lt;/a> 有提到 route method
我們就需要在表單設定 &lt;code>@method&lt;/code>&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">form&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @method(&amp;#39;PUT&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">form&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="2">
&lt;li>登入/訪客
有沒有登入也可以在 Blade 設定&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">@auth
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // 有登入
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@endauth
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@guest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> // 訪客(未登入)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">@endguest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="demo">DEMO&lt;/h2>
&lt;p>此時瀏覽　&lt;code>/bladeTest&lt;/code> 就會看到頁面了！&lt;/p>
&lt;p>&lt;img src="../../images/laravel7-30days/day7/demo.jpeg"
loading="lazy"
>&lt;/p></description></item><item><title>Day 6. 第一個頁面: Controller &amp; View</title><link>https://www.chihyu.me/2022/11/laravel7-30days-day6-first-view/</link><pubDate>Sun, 06 Nov 2022 02:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/11/laravel7-30days-day6-first-view/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post Day 6. 第一個頁面: Controller &amp; View" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;p>上一篇: &lt;a class="link" href="../../2022/11/laravel7-30days-day5-router" title="Day 5. 路由: Router"
>Day 5. 路由: Router&lt;/a>&lt;/p>
&lt;p>聊完路由，&lt;br>
今天來跟大家分享，第一個頁面，透過 Controller 渲染的第一個　view&lt;/p>
&lt;h2 id="使用">使用&lt;/h2>
&lt;h3 id="宣告一個路由">宣告一個路由&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/firstView&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;FirstViewController@firstView&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;firstView&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="建立-controller">建立 Controller&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">php artisan make:controller FirstViewController
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>我都會在專案目錄底下執行 command line產生 Controller，&lt;br>
(自己手動建立也可以)&lt;/p>
&lt;p>會產生 Controller 於 &lt;code>/app/Http/Controllers/&lt;/code> 底下，
我們可以&lt;/p>
&lt;ol>
&lt;li>加上我們剛剛路由設定的 function &lt;code>firstView()&lt;/code>&lt;/li>
&lt;li>於 function 裡 return &lt;code>view('name')&lt;/code>&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">namespace&lt;/span> &lt;span class="nx">App\Http\Controllers&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">use&lt;/span> &lt;span class="nx">Illuminate\Http\Request&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">FirstViewController&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Controller&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">firstView&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">view&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;day6.firstView&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="建立-view">建立 View&lt;/h3>
&lt;p>頁面都會放在 &lt;code>/resources/views/&lt;/code> 底下，&lt;br>
Laravel 的 view 使用他們的模板引擎 &lt;code>blade&lt;/code>，&lt;br>
所以檔名都是 &lt;code>xxxx.blade.php&lt;/code>，&lt;br>
Controller function return 的 view　省略後綴(.blade.php)　　&lt;br>
為方便 DMEO 我就直接抓 welcome 的 view&lt;/p>
&lt;h2 id="demo">DEMO&lt;/h2>
&lt;p>此時瀏覽　&lt;code>/firstView&lt;/code> 就會看到頁面了！&lt;/p>
&lt;p>&lt;img src="../../images/laravel7-30days/day6/first-view-demo.jpeg"
loading="lazy"
>&lt;/p></description></item><item><title>Day 5. 路由: Router</title><link>https://www.chihyu.me/2022/11/laravel7-30days-day5-router/</link><pubDate>Sat, 05 Nov 2022 02:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/11/laravel7-30days-day5-router/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post Day 5. 路由: Router" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;p>上一篇: &lt;a class="link" href="../../2022/11/laravel7-30days-day4-vscode-plugins" title="Day 4. VSCode 套件推薦"
>Day 4. VSCode 套件推薦&lt;/a>&lt;/p>
&lt;p>今天來跟大家分享，使用者的第一個路口：路由&lt;/p>
&lt;h2 id="使用">使用&lt;/h2>
&lt;p>可以先看看[官方文件](&lt;a class="link" href="https://laravel.com/docs/7.x/routing" target="_blank" rel="noopener"
>https://laravel.com/docs/7.x/routing&lt;/a> 官方文件)&lt;/p>
&lt;p>Route 的設定在 &lt;code>routes/&lt;/code> 裡面，平常最常使用的是 &lt;code>web.php&lt;/code>、&lt;code>api.php&lt;/code>，&lt;br>
頁面用 &lt;code>web.php&lt;/code>、API則可以使用 &lt;code>api.php&lt;/code>，&lt;br>
使用的語法是相同的，今天會以 &lt;code>web.php&lt;/code>為範例進行介紹，&lt;/p>
&lt;h3 id="基本語法">基本語法&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># method: GET， 路徑： /hello ，直接回傳： Hello World
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;hello&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s1">&amp;#39;Hello World&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>不過通常我們都會這樣使用，&lt;br>
路由只設定路由，這個路由要幹嘛都會交給 Controller 處理，&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># method: GET， 路徑： /basicRouteUseController ，交給 BasicRouteController 的 Controller Class，Function 是 index()
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/basicRouteUseController&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;BasicRouteController@index&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="方法">方法&lt;/h3>
&lt;p>Laravel 提供的路由有很多 method 可以設定，&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$uri&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$callback&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 單純 post
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">post&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$uri&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$callback&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># post 通常使用在更新
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">put&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$uri&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$callback&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">patch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$uri&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$callback&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># post 刪除
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">delete&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$uri&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$callback&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 這個我沒有使用過
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">options&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$uri&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$callback&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>post如要設定其他 method 可於 html form 表單內設定 &lt;code>@method('PUT')&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">form&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> @method(&amp;#39;PUT&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">form&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="參數">參數&lt;/h3>
&lt;p>參數使用大括號&lt;code>{}&lt;/code>框起來，然後在 function 裡加參數即可使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># /route/web.php
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/basicRouteWithParam/{id}&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;BasicRouteController@show&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># /app/Http/Controllers/BasicRouteController.php @ show()
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">public&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">show&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$id&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">echo&lt;/span> &lt;span class="nv">$id&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="命名">命名&lt;/h3>
&lt;p>通常我所有的路由都會命名，這樣之後要使用上可以使用 helper 的 &lt;code>route()&lt;/code> 直接調用，&lt;br>
萬一哪天 uri 要變更時，只要異動 &lt;code>routes/web.php&lt;/code> 即可，&lt;br>
因為所有頁面都是使用 route name 調用&lt;br>
使用方法&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/basicRouteDefineName&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;BasicRouteController@defineName&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;thisIsBasicRouteDefineName&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如範例就可以使用 &lt;code>route('thisIsBasicRouteDefineName')&lt;/code> 取得這個路由&lt;/p>
&lt;h3 id="群組">群組&lt;/h3>
&lt;p>官方有提供 &lt;code>Route::group&lt;/code> 可以將路由們分組&lt;br>
使用方式&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># prefix = 前綴
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># as = name 的前綴
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">group&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="s1">&amp;#39;prefix&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;routeGroups&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;as&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;routeGroups&amp;#39;&lt;/span> &lt;span class="p">],&lt;/span> &lt;span class="k">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/a&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;RouteGroupController@a&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;a&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/b&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;RouteGroupController@b&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;b&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/c&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;RouteGroupController@c&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;c&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>群組後，其實就等於是 &amp;hellip;&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">group&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="s1">&amp;#39;prefix&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;routeGroups&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;as&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;routeGroups&amp;#39;&lt;/span> &lt;span class="p">],&lt;/span> &lt;span class="k">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/routeGroups/a&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;RouteGroupController@a&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;routeGroups.a&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/routeGroups/b&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;RouteGroupController@b&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;routeGroups.b&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/routeGroups/c&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;RouteGroupController@c&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;routeGroups.c&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>表達上是一樣的，只是比較好閱讀而且看起來比較整齊&lt;/p>
&lt;/blockquote>
&lt;h3 id="小撇步">小撇步&lt;/h3>
&lt;p>CRUD 肯定是一個頁面滿基本的需求，我通常會這樣設定，
之後再跟大家聊聊為何我都會這樣設定吧&lt;/p>
&lt;p>以會員『新增』、『修改』、『刪除』為範例&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">group&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="s1">&amp;#39;prefix&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;users&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;as&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;users.&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 列表
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;UserController@index&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;index&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 新增
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/create&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;UserController@create&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;create&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">post&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;UserController@store&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;store&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 編輯
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/{user}/edit&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;UserController@edit&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;edit&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">patch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/{user}&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;UserController@update&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;update&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 刪除
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Route&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">delete&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/{user}&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;UserController@destroy&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">name&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;destroy&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Day 4. VSCode 套件推薦</title><link>https://www.chihyu.me/2022/11/laravel7-30days-day4-vscode-plugins/</link><pubDate>Thu, 03 Nov 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/11/laravel7-30days-day4-vscode-plugins/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post Day 4. VSCode 套件推薦" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>上一篇: &lt;a class="link" href="../../2022/11/laravel7-30days-day3-environment" title="Day 3. 環境設定"
>Day 3. 環境設定&lt;/a>&lt;/p>
&lt;p>今天來跟大家分享我平常使用 VSCode 開發 Laravel 時安裝的套件巴&lt;/p>
&lt;h2 id="plugins">plugins&lt;/h2>
&lt;h3 id="dotenv">DotENV&lt;/h3>
&lt;p>安裝這個後，編輯 .env 檔時就會有高亮，&lt;br>
比較好閱讀、編輯&lt;/p>
&lt;p>網址：&lt;a class="link" href="https://marketplace.visualstudio.com/items?itemName=mikestead.dotenv" target="_blank" rel="noopener"
>Link&lt;/a>&lt;/p>
&lt;h3 id="laravel-blade-snippets">Laravel Blade Snippets&lt;/h3>
&lt;p>Blade 是 Laravel view 的模本引擎，&lt;br>
可以提高閱讀， snippet 也可以幫助開發&lt;/p>
&lt;p>網址：&lt;a class="link" href="https://marketplace.visualstudio.com/items?itemName=onecentlin.laravel-blade" target="_blank" rel="noopener"
>Link&lt;/a>&lt;/p>
&lt;h3 id="laravel-extra-intellisense">Laravel Extra Intellisense&lt;/h3>
&lt;p>開發時會有很多提時，如要使用哪一個 view、config 只要打前面就會提示可以比較不用翻找&lt;/p>
&lt;p>網址：&lt;a class="link" href="https://marketplace.visualstudio.com/items?itemName=amiralizadeh9480.laravel-extra-intellisense" target="_blank" rel="noopener"
>Link&lt;/a>&lt;/p>
&lt;h3 id="laravel-goto-view">Laravel goto view&lt;/h3>
&lt;p>Controller 要 return view 的時候可以像點網址一樣，直接開啟檔案&lt;/p>
&lt;p>網址：&lt;a class="link" href="https://marketplace.visualstudio.com/items?itemName=codingyu.laravel-goto-view" target="_blank" rel="noopener"
>Link&lt;/a>&lt;/p>
&lt;h3 id="php-namespace-resolver">PHP Namespace Resolver&lt;/h3>
&lt;p>右鍵 『imoport class』就自動幫你 use，&lt;br>
完全不需要找 class 在哪裡，&lt;/p>
&lt;p>網址：&lt;a class="link" href="https://marketplace.visualstudio.com/items?itemName=MehediDracula.php-namespace-resolver" target="_blank" rel="noopener"
>Link&lt;/a>&lt;/p></description></item><item><title>Day 3. 環境設定</title><link>https://www.chihyu.me/2022/11/laravel7-30days-day3-environment/</link><pubDate>Wed, 02 Nov 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/11/laravel7-30days-day3-environment/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post Day 3. 環境設定" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>上一篇: &lt;a class="link" href="../laravel7-30days-day2-installation" title="Day 2. 安裝及資料夾介紹"
>Day 2. 安裝及資料夾介紹&lt;/a>&lt;br>
今天則要來介紹初始化的一些設定，&lt;/p>
&lt;h2 id="伺服器設定">伺服器設定&lt;/h2>
&lt;p>檔案資料夾要設定在 &lt;code>專案路徑/public/&lt;/code>&lt;/p>
&lt;h3 id="nginx">nginx&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">server &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> listen 80&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> listen &lt;span class="o">[&lt;/span>::&lt;span class="o">]&lt;/span>:80&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># (1) 網址&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server_name laravel7-30days.test&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># (2)專案路徑&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> root /var/www/html/laravel7-30days/public&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> index index.php index.html index.htm&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location / &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> try_files &lt;span class="nv">$uri&lt;/span> &lt;span class="nv">$uri&lt;/span>/ /index.php&lt;span class="nv">$is_args$args&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location ~ &lt;span class="se">\.&lt;/span>php$ &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> try_files &lt;span class="nv">$uri&lt;/span> &lt;span class="nv">$uri&lt;/span>/ &lt;span class="o">=&lt;/span>404&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># (3) php使用&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># local&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># fastcgi_pass unix:/var/run/php/php7.3-fpm.sock;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># docker&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fastcgi_pass PHP7.3:9000&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fastcgi_index index.php&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fastcgi_param SCRIPT_FILENAME &lt;span class="nv">$document_root$fastcgi_script_name&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># for phpstorm / xdebug&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#fastcgi_param PHP_IDE_CONFIG serverName=localhost;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fastcgi_buffers &lt;span class="m">8&lt;/span> 128k&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fastcgi_buffer_size 256k&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># for long running debug sessions&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fastcgi_read_timeout 600&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#fastcgi_intercept_errors on;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> include fastcgi_params&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location ~ /&lt;span class="se">\.&lt;/span>ht &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> deny all&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="apache">apache&lt;/h3>
&lt;p>我本地是使用 &lt;code>nginx&lt;/code> , 沒有使用 &lt;code>apache&lt;/code>&lt;br>
這部份是參考網路上的&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&amp;lt;VirtualHost *:80&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># (1) 專案路徑&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> DocumentRoot &lt;span class="s2">&amp;#34;/var/www/html/laravel7-30days/public&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># (2) 網址&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ServerName laravel7-30days.test
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># (3) LOG的地方&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ErrorLog &lt;span class="s2">&amp;#34;/var/www/html/laravel7-30days/storage/laravel7-30days_error.log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> CustomLog &lt;span class="s2">&amp;#34;/var/www/html/laravel7-30days/storage/laravel7-30days_access.log&amp;#34;&lt;/span> combined
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> DirectoryIndex index.php
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># (4) 專案路徑&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;Directory &lt;span class="s2">&amp;#34;/var/www/html/laravel7-30days/public&amp;#34;&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> AllowOverride All
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Order allow,deny
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Allow from all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;/Directory&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;/VirtualHost&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="執行">執行&lt;/h2>
&lt;p>於專案路徑底下執行&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#複製一個環境檔&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp .env.example .env
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># composer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">composer install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># npm &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">npm install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#生成 .env key &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">php artisan key:generate
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="設定-env-檔">設定 env 檔&lt;/h2>
&lt;p>&lt;code>.env&lt;/code> 檔是納入 &lt;code>.gitignore&lt;/code> 的所以很多個人設定的東西可以直接放在這，如網址、DB連線 等等&lt;/p>
&lt;h3 id="基本設定">基本設定&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 網站名稱&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">APP_NAME&lt;/span>&lt;span class="o">=&lt;/span>Laravel-30天
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 環境 本地(local) 測試(develop) 正式(production) 也可以依照個人喜好設定&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">APP_ENV&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nb">local&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 網站必須的 key (執行 php artisan key:generate 就會產生)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">APP_KEY&lt;/span>&lt;span class="o">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 是否要顯示錯誤 true|false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">APP_DEBUG&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 網址&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">APP_URL&lt;/span>&lt;span class="o">=&lt;/span>http://laravel7-30days.test
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="log">Log&lt;/h3>
&lt;p>Laravel 有自己的 LOG 可以查看，&lt;br>
我都設定 &lt;code>daily&lt;/code> 每天都會產生一個 LOG檔&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">LOG_CHANNEL&lt;/span>&lt;span class="o">=&lt;/span>daily
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>若想設定其他的可以參考&lt;a class="link" href="https://laravel.com/docs/7.x/logging#configuration" title="文件"
target="_blank" rel="noopener"
>文件&lt;/a>&lt;/p>
&lt;h3 id="db-設定">DB 設定&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">DB_CONNECTION&lt;/span>&lt;span class="o">=&lt;/span>mysql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">DB_HOST&lt;/span>&lt;span class="o">=&lt;/span>127.0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">DB_PORT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">3306&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">DB_DATABASE&lt;/span>&lt;span class="o">=&lt;/span>laravel
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">DB_USERNAME&lt;/span>&lt;span class="o">=&lt;/span>root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">DB_PASSWORD&lt;/span>&lt;span class="o">=&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="redis-設定">Redis 設定&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">REDIS_HOST&lt;/span>&lt;span class="o">=&lt;/span>127.0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">REDIS_PASSWORD&lt;/span>&lt;span class="o">=&lt;/span>null
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">REDIS_PORT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">6379&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="mail-server">Mail Server&lt;/h3>
&lt;p>發信用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">MAIL_MAILER&lt;/span>&lt;span class="o">=&lt;/span>smtp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">MAIL_HOST&lt;/span>&lt;span class="o">=&lt;/span>smtp.mailtrap.io
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">MAIL_PORT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">2525&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">MAIL_USERNAME&lt;/span>&lt;span class="o">=&lt;/span>null
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">MAIL_PASSWORD&lt;/span>&lt;span class="o">=&lt;/span>null
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">MAIL_ENCRYPTION&lt;/span>&lt;span class="o">=&lt;/span>null
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">MAIL_FROM_ADDRESS&lt;/span>&lt;span class="o">=&lt;/span>null
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">MAIL_FROM_NAME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">APP_NAME&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="其他">其他&lt;/h3>
&lt;p>以下設定我都是使用預設值，&lt;br>
但還是簡單跟大家介紹一下&lt;/p>
&lt;ol>
&lt;li>隊列設定，可以參考 &lt;code>/config/queue.php&lt;/code> 設定，預設是 &lt;code>sync&lt;/code>，&lt;br>
如寄信功能就可能需要設定，避免執行過程中畫面卡著。
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">QUEUE_CONNECTION=sync
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>Broadcaster 廣播，可以發通知的功能&lt;br>
可以參考 &lt;code>/config/broadcasting.php&lt;/code>
(這個我目前沒用過)
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">BROADCAST_DRIVER&lt;/span>&lt;span class="o">=&lt;/span>log
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>快取設定，可以參考 &lt;code>/config/cache.php&lt;/code>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">CACHE_DRIVER&lt;/span>&lt;span class="o">=&lt;/span>file
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>Seesion 設定，可以參考 &lt;code>/config/session.php&lt;/code>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">SESSION_DRIVER&lt;/span>&lt;span class="o">=&lt;/span>file
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">SESSION_LIFETIME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">120&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ol>
&lt;h2 id="結語">結語&lt;/h2>
&lt;p>env 的設定，都是跟 &lt;code>/config/&lt;/code> 底下檔案息息相關，&lt;br>
可以理解成 config 是預設值， env是設定值&lt;br>
所以我開發時都會直接用 &lt;code>config()&lt;/code> 調用他們。&lt;/p></description></item><item><title>Day 2. 安裝及資料夾介紹</title><link>https://www.chihyu.me/2022/11/laravel7-30days-day2-installation/</link><pubDate>Tue, 01 Nov 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/11/laravel7-30days-day2-installation/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post Day 2. 安裝及資料夾介紹" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>環境建立的方式有很多種，這邊就不多做介紹，&lt;br>
以下提幾個我知道的方式，&lt;br>
之後寫相關的文章介紹&lt;/p>
&lt;h3 id="windows">Windows&lt;/h3>
&lt;ol>
&lt;li>WAMP&lt;/li>
&lt;li>XAMPP&lt;/li>
&lt;li>Vagrant &amp;amp; Homestead&lt;/li>
&lt;/ol>
&lt;h3 id="linux">Linux&lt;/h3>
&lt;ol>
&lt;li>Nginx + php&lt;/li>
&lt;li>docker&lt;/li>
&lt;/ol>
&lt;h2 id="安裝">安裝&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>安裝 composer &lt;a class="link" href="https://getcomposer.org/download/" title="Download composer"
target="_blank" rel="noopener"
>Download&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>移到你要安裝 Laravel的路徑，並執行&lt;/p>
&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">composer create-project --prefer-dist laravel/laravel &lt;span class="o">{{&lt;/span>project_name&lt;span class="o">}}&lt;/span> &lt;span class="s2">&amp;#34;7.*&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如下圖範例&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">composer create-project --prefer-dist laravel/laravel laravel7-30days &lt;span class="s2">&amp;#34;7.*&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="../../images/laravel7-30days/day2/composer-install.jpeg"
loading="lazy"
>
&lt;img src="../../images/laravel7-30days/day2/composer-install-compelete.jpeg"
loading="lazy"
>&lt;/p>
&lt;h2 id="資料夾介紹">資料夾介紹&lt;/h2>
&lt;p>安裝後，專案內就會長這樣&lt;br>
&lt;img src="../../images/laravel7-30days/day2/folder-construct.jpeg"
loading="lazy"
>&lt;/p>
&lt;h3 id="app">app&lt;/h3>
&lt;p>很多開發的地方如 Controller、Middleware、Provider 等等&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>資料夾名稱&lt;/th>
&lt;th>作用&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>app/Console&lt;/td>
&lt;td>放產生 Command Line 的地方，可以把排程放在這，然後執行&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>app/Exceptions&lt;/td>
&lt;td>報錯的地方，也可以自定義&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>app/Http/Controller&lt;/td>
&lt;td>放 Controller, 路由進來可以直接指向的地方&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>app/Http/Middleware&lt;/td>
&lt;td>中介層，路由進 Controller 執行之前可以先執行的事情，如權限&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>app/Providers&lt;/td>
&lt;td>專案執行會加載的地方，裏面有框架預設的 Provider，也可以自定義自己 Provider&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>app/Models&lt;/td>
&lt;td>(自定義的) Laravel7的 Model 都是直接放在 app/ 我會把我的 Model 統一放在這個資料夾裏面&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="bootstrap">bootstrap&lt;/h3>
&lt;p>框架初始化的地方，基本上不會動到他。&lt;/p>
&lt;h3 id="config">config&lt;/h3>
&lt;p>放設定檔的地方，
可以在任何地方使用 &lt;code>config()&lt;/code> 調用，
也可以自定義config&lt;/p>
&lt;ul>
&lt;li>
&lt;p>語法 : &lt;a class="link" href="https://laravel.com/docs/9.x/helpers#method-config" target="_blank" rel="noopener"
>文件&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">config&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;&amp;lt;檔名&amp;gt;.&amp;lt;key&amp;gt;.&amp;lt;key...&amp;gt;&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>範例 取得 config/app.php 的 &amp;ldquo;name&amp;rdquo;&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">config&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;app.name&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="database">database&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>資料夾名稱&lt;/th>
&lt;th>作用&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>database/factories&lt;/td>
&lt;td>資料表種子工廠，產生假資料的地方&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>database/migrations&lt;/td>
&lt;td>資料表的腳本，透過這個可以管理資料表的結構&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>database/seeds&lt;/td>
&lt;td>可以產生資料表的值，也可以透過 Factories 產生大量假資料&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="public">public&lt;/h3>
&lt;p>對外開放的地方，伺服器(nginx|apache)要設定這個資料夾&lt;/p>
&lt;h3 id="resources">resources&lt;/h3>
&lt;p>放view、js、css 的地方&lt;/p>
&lt;h3 id="routes">routes&lt;/h3>
&lt;p>路由，最常使用到 &lt;code>web.php&lt;/code>&lt;/p>
&lt;h3 id="storage">storage&lt;/h3>
&lt;p>放檔案的地方，LOG 也會放在這裡&lt;/p>
&lt;h3 id="tests">tests&lt;/h3>
&lt;p>單元測試用&lt;/p>
&lt;h3 id="vendor">vendor&lt;/h3>
&lt;p>composer install的套件，基本上不會動到他，只需要管理 &lt;code>composer.json&lt;/code> 即可&lt;/p>
&lt;h3 id="node_modules">node_modules&lt;/h3>
&lt;p>圖片沒有，但在執行 &lt;code>npm install&lt;/code> 的時候會出現，放前端套件的地方&lt;/p>
&lt;h3 id="其他檔案們">其他檔案們&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>名稱&lt;/th>
&lt;th>作用&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>composer.json&lt;/td>
&lt;td>管理第三方套件的檔案&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>composer.lock&lt;/td>
&lt;td>composer install後產生的檔案&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>.env&lt;/td>
&lt;td>環境設定檔 環境、DB連線、mailserver &amp;hellip;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>.env.example&lt;/td>
&lt;td>環境設定範例檔&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>.gitignore&lt;/td>
&lt;td>git 的忽略檔&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>package.json&lt;/td>
&lt;td>npm 管理套件的地方&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>phpunit.xml&lt;/td>
&lt;td>單元測試設定檔&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>server.php&lt;/td>
&lt;td>沒設定 nginx、apache 可以 &lt;code>php artisan serve&lt;/code> 就可以直接使用&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>webpack.mix.js&lt;/td>
&lt;td>執行 &lt;code>npm run dev&lt;/code> 或 &lt;code>npm run &amp;lt;any script&amp;gt;&lt;/code> 的腳本&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Day 1. 新手上路，聊聊我愛的 Laravel</title><link>https://www.chihyu.me/2022/10/laravel7-30days-day1-why-use-laravel/</link><pubDate>Sun, 30 Oct 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/10/laravel7-30days-day1-why-use-laravel/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/day1.png" alt="Featured image of post Day 1. 新手上路，聊聊我愛的 Laravel" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>Laravel7 30天: &lt;a class="link" href="../../2022/10/laravel7-30days-directory" title="目錄"
>目錄&lt;/a>&lt;br>
專案連結: &lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github - laravel7 之 30 天分享&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>截至目前 Laravel 已經出到 version 9 了，&lt;br>
再過幾個月可能就 version 10 了 (預計發佈時間: 2023/2/7)，&lt;br>
距離我有在使用的 7 已經愈來愈遠了，&lt;br>
很多新的用法，好的功能，很難享受到，覺得很可惜，&lt;br>
所以我想把這個版本做個紀錄，&lt;br>
之後可能會使用 Laravel 最新版本了 ~&lt;/p>
&lt;h2 id="why-laravel-7-">Why Laravel 7 ?&lt;/h2>
&lt;p>過去我使用過很多 5.x 的版本，&lt;br>
當時的我還不太會這個框架，很多功能不知道，&lt;br>
總是喜歡用自己的方式直接把功能建立上去，&lt;br>
反正能夠執行就好的概念&lt;/p>
&lt;p>於 2020年， 也是 Laravel 7 發佈的那年，&lt;br>
慶幸剛好當時公司來了個神人產生文件、建立會議教學大家如何使用，&lt;br>
使用至今也已經3年了，&lt;/p>
&lt;p>只能說 Laravel 使 PHP 更偉大。👍&lt;/p>
&lt;h2 id="what-is-laravel-">What is Laravel ?&lt;/h2>
&lt;p>Laravel 是 PHP 的一個框架， MVC 的架構，&lt;br>
使用上相當的便利，基於框架建立的功能，不會走鐘太嚴重，會比較好維護，&lt;/p>
&lt;p>好處：&lt;/p>
&lt;ol>
&lt;li>有非常多的使用者，很多不會的問題 google 都滿容易找到答案&lt;/li>
&lt;li>有相對完整的文檔&lt;/li>
&lt;li>資源很多:看不完的教學文章&lt;/li>
&lt;/ol>
&lt;p>你說好用到底哪裡好用？&lt;/p>
&lt;p>以下簡單舉例一下:&lt;/p>
&lt;ul>
&lt;li>artisan 可以用 command line 的方式做很多事&lt;/li>
&lt;li>資料表 可以透過 migration 產生&lt;/li>
&lt;li>Model 可以透過 Eloquent ORM 協助表的溝通&lt;/li>
&lt;li>Route 控制路由的地方&lt;/li>
&lt;li>Controller 就是可以拿來寫程式邏輯的地方&lt;/li>
&lt;li>Blade 則是 view 的模版引擎，讓你放 html 的地方&lt;br>
&amp;hellip;&lt;/li>
&lt;/ul>
&lt;h2 id="哪些人適合閱讀這系列文章呢">哪些人適合閱讀這系列文章呢？&lt;/h2>
&lt;ol>
&lt;li>正在使用 Laravel 7&lt;/li>
&lt;li>初學 Laravel&lt;/li>
&lt;li>想要上手 php 的框架&lt;/li>
&lt;li>想接觸 php MVC 框架入門&lt;/li>
&lt;/ol></description></item><item><title>目錄</title><link>https://www.chihyu.me/2022/10/laravel7-30days-directory/</link><pubDate>Sun, 30 Oct 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/10/laravel7-30days-directory/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel7-30days/wellcome.jpeg" alt="Featured image of post 目錄" />&lt;h2 id="資源">資源&lt;/h2>
&lt;p>我會把 30天的範例程式碼放在&lt;a class="link" href="https://github.com/ChihYuLin66/laravel7-30days" title="laravel7 之 30 天分享"
target="_blank" rel="noopener"
>github 連結&lt;/a>&lt;/p>
&lt;h2 id="目錄">目錄&lt;/h2>
&lt;ul>
&lt;li>&lt;a class="link" href="../../2022/10/laravel7-30days-day1-why-use-laravel" title="Day 1. 新手上路，聊聊我愛的 Laravel"
>Day 1. 新手上路，聊聊我愛的 Laravel&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day2-installation" title="Day 2. 安裝及資料夾介紹"
>Day 2. 安裝及資料夾介紹&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day3-environment" title="Day 3. 環境設定"
>Day 3. 環境設定&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day4-vscode-plugins" title="Day 4. VSCode 套件推薦"
>Day 4. VSCode 套件推薦&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day5-router" title="Day 5. 路由: Router"
>Day 5. 路由: Router&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day6-first-view" title="Day 6. 第一個頁面: Controller &amp;amp; View"
>Day 6. 第一個頁面: Controller &amp;amp; View&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day7-blade" title="Day 7. View 的模板引擎: Blade"
>Day 7. View 的模板引擎: Blade&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day8-auth-signup-signin" title="Day 8. Authentication-1 登入註冊 "
>Day 8. Authentication-1 登入註冊 &lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day9-auth-email-verify" title="Day 9. Authentication-2 信箱驗證"
>Day 9. Authentication-2 信箱驗證&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day10-auth-reset-password" title="Day 10. Authentication-3 忘記密碼/重設密碼"
>Day 10. Authentication-3 忘記密碼/重設密碼&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day11-migration" title="Day 11. 建立資料表: Migration"
>Day 11. 建立資料表: Migration&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day12-eloquent" title="Day 12. Eloquent: Model"
>Day 12. Eloquent: Model&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day13-user-profile" title="Day 13. 第二個頁面: 個人資料維護"
>Day 13. 第二個頁面: 個人資料維護&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day14-middleware" title="Day 14. 中介層 Middleware"
>Day 14. 中介層 Middleware&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day15-eloquent-relationships-one-to-one" title="Day 15. Eloquent Relationships 一對一"
>Day 15. Eloquent Relationships 一對一&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day16-eloquent-relationships-one-to-many" title="Day 16. Eloquent Relationships 一對多"
>Day 16. Eloquent Relationships 一對多&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day17-eloquent-relationships-many-to-many" title="Day 17. Eloquent Relationships 多對多"
>Day 17. Eloquent Relationships 多對多&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day18-eloquent-relationships-polymorphic-one-to-one" title="Day 18. Eloquent Polymorphic Relationships 多態的一對一"
>Day 18. Eloquent Polymorphic Relationships 多態的一對一&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day19-eloquent-relationships-polymorphic-one-to-many" title="Day 19. Eloquent Polymorphic Relationships 多態的一對多"
>Day 19. Eloquent Polymorphic Relationships 多態的一對多&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day20-eloquent-relationships-polymorphic-many-to-many" title="Day 20. Eloquent Polymorphic Relationships 多態的多對多"
>Day 20. Eloquent Polymorphic Relationships 多態的多對多&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day21-collection" title="Day 21. 資料整理好幫手 - Collection"
>Day 21. 資料整理好幫手 - Collection&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day22-make-resource-controller" title="Day 22. CRUD 很簡單 Resource Controller"
>Day 22. CRUD 很簡單 Resource Controller&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day23-todo-intro" title="Day 23. 實作 TODO 練習 上篇:前置作業"
>Day 23. 實作 TODO 練習 上篇:前置作業&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day24-todo-main" title="Day 24. 實作 TODO 練習 下篇:畫面及功能"
>Day 24. 實作 TODO 練習 下篇:畫面及功能&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day25-validation" title="Day 25. Validation"
>Day 25. Validation&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day26-validation-request" title="Day 26. Validation-2 Request 讓 Controller 更乾淨"
>Day 26. Validation-2 Request 讓 Controller 更乾淨&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day27-session" title="Day 27. Session"
>Day 27. Session&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day28-log" title="Day 28. Log"
>Day 28. Log&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="../../2022/11/laravel7-30days-day29-pagination" title="Day 29. 分頁 Pagination"
>Day 29. 分頁 Pagination&lt;/a>&lt;/li>
&lt;li>Day 30. 結束&lt;/li>
&lt;/ul>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted --></description></item><item><title>Laravel Eloquent Or Query Builder</title><link>https://www.chihyu.me/2022/09/laravel-magic-eloquent-or-query-builder/</link><pubDate>Wed, 21 Sep 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/09/laravel-magic-eloquent-or-query-builder/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel-magic/banner-eloquent-or-query-builder.png" alt="Featured image of post Laravel Eloquent Or Query Builder" />&lt;h2 id="前言">前言&lt;/h2>
&lt;h3 id="使用的版本">使用的版本&lt;/h3>
&lt;p>Laravel: 7&lt;br>
php: 7.3&lt;/p>
&lt;p>我們都知道在 Laravel 裡面取得資料庫資料可以使用 &lt;code>Eloquent ORM&lt;/code> 、&lt;code>Query Builder&lt;/code>，&lt;br>
今天就來聊聊兩者到底差在哪裡巴 ~&lt;/p>
&lt;h2 id="主要內容">主要內容&lt;/h2>
&lt;h3 id="eloquent-orm">Eloquent ORM&lt;/h3>
&lt;p>透過物件的方式調用資料，&lt;br>
可參考 &lt;a class="link" href="https://laravel.com/docs/7.x/eloquent" target="_blank" rel="noopener"
>文件&lt;/a>，相關語法如下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">use&lt;/span> &lt;span class="nx">App\Models\User&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">User&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;Jason&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">first&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="query-builder">Query Builder&lt;/h3>
&lt;p>直接對資料表進行調用，&lt;br>
可先參考 &lt;a class="link" href="https://laravel.com/docs/7.x/queries" target="_blank" rel="noopener"
>文件&lt;/a>，相關語法如下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">use&lt;/span> &lt;span class="nx">Illuminate\Support\Facades\DB&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">DB&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">table&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;users&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">where&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;Jason&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">first&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>以上兩段程式碼，都是在取 name = Jason 的人，取出來的值也能直接使用&lt;/p>
&lt;/blockquote>
&lt;h3 id="速度比較">速度比較&lt;/h3>
&lt;p>因為我這段SQL比較簡單，所以很難看出速度哪個比較快&lt;br>
於是我網路上找了一下資源，如下所示&lt;br>
&lt;img src="../../images/laravel-magic/eloquent-or-query-builder/speed.jpeg"
loading="lazy"
>&lt;br>
(圖片資料參考於 &lt;a class="link" href="https://dev.to/hesamzakerirad/laravel-orm-vs-query-builder-vs-sql-speed-test-4knf" target="_blank" rel="noopener"
>頁面&lt;/a>)&lt;/p>
&lt;p>&lt;code>Query Builder&lt;/code> 調用的速度上比 &lt;code>Eloquent&lt;/code> 還要快很多 (將近一倍)&lt;br>
這樣你說 &lt;code>Query Builder&lt;/code> 比較快，執行上語法也差異不大，為何還要選擇使用 &lt;code>Eloquent&lt;/code> 呢？&lt;/p>
&lt;h3 id="eloquent-優勢在哪裡">Eloquent 優勢在哪裡？&lt;/h3>
&lt;ol>
&lt;li>增加程式碼閱讀&lt;/li>
&lt;li>relationship 關聯其他 Model&lt;/li>
&lt;li>Accessors&lt;/li>
&lt;li>Soft Deletes&lt;/li>
&lt;li>Scopes&lt;/li>
&lt;li>Mutators &amp;amp; Casting
&amp;hellip;&amp;hellip; 等等功能&lt;/li>
&lt;/ol>
&lt;p>雖然 &lt;code>Eloquent&lt;/code> 的效能比較不好，但因著這些強大功能覺得也是種取捨&lt;/p>
&lt;h2 id="結論">結論&lt;/h2>
&lt;p>我大部分的功能都會使用 &lt;code>Eloquent&lt;/code> 與 &lt;code>Collection&lt;/code> 達成一個組合技，規劃並完成，&lt;br>
不過若是一次性或不太會異動的功能，感覺就可以考慮看看 &lt;code>Query Builder&lt;/code>，&lt;br>
雖然我還是都使用 &lt;code>Eloquent&lt;/code> 畢竟遇到後續的需求修改，會相對提升可塑性(好讀、好改)&lt;/p></description></item><item><title>Laravel Eloquent 自定義資料表名稱(TableName)</title><link>https://www.chihyu.me/2022/08/laravel-magic-eloquent-eloquent-customize-table-name/</link><pubDate>Thu, 04 Aug 2022 02:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/08/laravel-magic-eloquent-eloquent-customize-table-name/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel-magic/banner-eloquent-customize-table-name.png" alt="Featured image of post Laravel Eloquent 自定義資料表名稱(TableName)" />&lt;h3 id="intro">intro&lt;/h3>
&lt;p>可參考 &lt;a class="link" href="https://laravel.com/docs/9.x/eloquent#table-names" title="eloquent customize table name documentaion"
target="_blank" rel="noopener"
>文件&lt;/a>&lt;/p>
&lt;h3 id="main">main&lt;/h3>
&lt;p>Laravel 預設的資料表名稱(TableName)都是 Model 名稱的複數，&lt;/p>
&lt;p>我習慣建立 &lt;code>make:model&lt;/code> 時加上 &lt;code>-m&lt;/code>，&lt;br>
這樣建立 model時，也建立 migration, 資料表名稱(TableName) 也會幫我設定好,&lt;br>
EX:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">php artisan make:model Member -m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>但如果我需要獨立開的話，或table不是來自migration，&lt;br>
我可以建立一個 Model,&lt;br>
並直接定義他要使用的 Table，&lt;br>
如此一來，&lt;br>
這個Table就可以使用 Eloquent 的強大功能 ！&lt;/p>
&lt;h3 id="範例">範例&lt;/h3>
&lt;p>檔案: app\Models\Member.php&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Member&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Model&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">protected&lt;/span> &lt;span class="nv">$table&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;member_list&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Laravel 用戶角色/權限輕鬆設定的套件</title><link>https://www.chihyu.me/2022/07/laravel-magic-packages-spatie-laravel-permission/</link><pubDate>Sat, 30 Jul 2022 00:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/07/laravel-magic-packages-spatie-laravel-permission/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel-magic/banner-packages-spatie-laravel-permission.png" alt="Featured image of post Laravel 用戶角色/權限輕鬆設定的套件" />&lt;h2 id="前言">前言&lt;/h2>
&lt;h3 id="我使用的版本">我使用的版本&lt;/h3>
&lt;p>Laravel: 7&lt;br>
php: 7.3&lt;br>
spatie/laravel-permission: 3&lt;/p>
&lt;p>可先參考 &lt;a class="link" href="https://spatie.be/docs/laravel-permission/v3/introduction" title="documentation"
target="_blank" rel="noopener"
>文件&lt;/a>&lt;/p>
&lt;h3 id="介紹">介紹&lt;/h3>
&lt;p>每個網站開發往往都需要使用者的權限設定&lt;br>
這些功能其實就那些 ~&lt;/p>
&lt;ul>
&lt;li>哪些角色可以使用?&lt;/li>
&lt;li>哪些權限可以使用?&lt;/li>
&lt;/ul>
&lt;p>spatie/laravel-permission 主要就是要解決這個問題
每個使用者可以設定多角色/多權限 相當方便&lt;/p>
&lt;h2 id="快速上手">快速上手&lt;/h2>
&lt;h3 id="安裝及初始化">安裝及初始化&lt;/h3>
&lt;ul>
&lt;li>在終端機執行安裝&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">composer require spatie/laravel-permission
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>開啟專案檔案 &lt;code>config/app.php&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;providers&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Spatie\Permission\PermissionServiceProvider&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>與終端機執行，引入套件的檔案
裡面含有 migration、config檔(&lt;code>config/permission.php&lt;/code>)&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">php artisan vendor:publish --provider&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Spatie\Permission\PermissionServiceProvider&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>再於終端機執行，建立資料表&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">php artisan migrate
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>在需要使用權限的Model 引用&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">use&lt;/span> &lt;span class="nx">Illuminate\Foundation\Auth\User&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="nx">Authenticatable&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">use&lt;/span> &lt;span class="nx">Spatie\Permission\Traits\HasRoles&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// ------ 加這個 Use Class**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">User&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Authenticatable&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">use&lt;/span> &lt;span class="nx">HasRoles&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// ------ 加這個**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="建立角色及權限">建立角色及權限&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">use&lt;/span> &lt;span class="nx">Spatie\Permission\Models\Role&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">use&lt;/span> &lt;span class="nx">Spatie\Permission\Models\Permission&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$role&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Role&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">create&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;writer&amp;#39;&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$permission&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Permission&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">create&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;edit articles&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="將角色設定某些權限">將角色設定某些權限&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$role&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Role&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$role&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">permissions&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">sync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$permissions_id&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="給使用者角色與權限">給使用者角色與權限&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 給角色
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nv">$role&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Role&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$role_id&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$user&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">assignRole&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$role&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 給權限
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nv">$permission&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Permission&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$permission_id&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$user&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">givePermissionTo&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$permission&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="取得使用者角色或權限">取得使用者角色或權限&lt;/h3>
&lt;ul>
&lt;li>取得使用者角色&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">User&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$roles&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$user&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">roles&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>取得使用者權限&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$user&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">User&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 方法一
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nv">$user&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">getPermissionsViaRoles&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 方法二
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nv">$user&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">getAllPermissions&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="其他">其他&lt;/h3>
&lt;p>更多資訊可以參閱他們官方的文件&lt;br>
可先參考 &lt;a class="link" href="https://spatie.be/docs/laravel-permission/v3/basic-usage/basic-usage" title="basic usage"
target="_blank" rel="noopener"
>文件&lt;/a>&lt;/p>
&lt;h2 id="結語">結語&lt;/h2>
&lt;p>這個套件真的滿好用的&lt;br>
且使用者也多，萬一遇到問題 Stackoverflow 也很多解法&lt;br>
真心推薦給大家 😄&lt;/p></description></item><item><title>Laravel 取得區間的SQL</title><link>https://www.chihyu.me/2022/07/laravel-magic-db-query-log/</link><pubDate>Sat, 16 Jul 2022 02:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/07/laravel-magic-db-query-log/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel-magic/banner-db-query-log.png" alt="Featured image of post Laravel 取得區間的SQL" />&lt;h3 id="main">main&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">\DB&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">enableQueryLog&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="c1">// Enable query log
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ... query ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">dd&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">\DB&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">getQueryLog&lt;/span>&lt;span class="p">());&lt;/span> &lt;span class="c1">// Show results of log
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="example">example&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">\DB&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">enableQueryLog&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="c1">// Enable query log
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nv">$product&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">Product&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">dd&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">\DB&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">getQueryLog&lt;/span>&lt;span class="p">());&lt;/span> &lt;span class="c1">// Show results of log
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="../../images/laravel-magic/query-log-example-01.jpeg"
loading="lazy"
>&lt;/p></description></item><item><title>Laravel Eloquent 自定義主鍵(primary-key)</title><link>https://www.chihyu.me/2022/07/laravel-magic-eloquent-customize-primary-key/</link><pubDate>Sun, 10 Jul 2022 02:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/07/laravel-magic-eloquent-customize-primary-key/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel-magic/banner-eloquent-customize-primary-key.png" alt="Featured image of post Laravel Eloquent 自定義主鍵(primary-key)" />&lt;h3 id="intro">intro&lt;/h3>
&lt;p>可參考 &lt;a class="link" href="https://laravel.com/docs/9.x/eloquent#primary-keys" title="eloquent customize primary key documentaion"
target="_blank" rel="noopener"
>文件&lt;/a>&lt;/p>
&lt;h3 id="main">main&lt;/h3>
&lt;p>Laravel 預設的 pKey 是 &lt;code>id&lt;/code>&lt;br>
在 Model 裡加入 &lt;code>$primaryKey&lt;/code> 參數，就可以使用這個自定義 pKey，&lt;br>
如此一來後續的關聯就不用每次都定義關聯的 key&lt;/p>
&lt;p>檔案: app\Models\Product.php&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">Product&lt;/span> &lt;span class="k">extends&lt;/span> &lt;span class="nx">Model&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">protected&lt;/span> &lt;span class="nv">$primaryKey&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;product_id&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Laravel 大量寫入的好幫手 chunk</title><link>https://www.chihyu.me/2022/06/laravel-magic-chunk/</link><pubDate>Sat, 25 Jun 2022 02:00:00 +0800</pubDate><guid>https://www.chihyu.me/2022/06/laravel-magic-chunk/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel-magic/banner-chunk.png" alt="Featured image of post Laravel 大量寫入的好幫手 chunk" />&lt;h2 id="what-is-chunk">What is chunk&lt;/h2>
&lt;p>&lt;img src="../../images/laravel-magic/chunk/what-is-chunk-01.jpeg"
loading="lazy"
>&lt;/p>
&lt;p>可以將 chunk 理解成&amp;hellip;&lt;br>
我將一大組資料分「塊」處理，&lt;br>
而不是逐筆處理&lt;/p>
&lt;h2 id="why-chunk">Why chunk&lt;/h2>
&lt;p>假設每筆就要執行一段SQL，&lt;br>
這樣我 5000筆資料，就要執行 5000次&lt;br>
如果我將這 5000 筆，每 500 分成一塊，我只要執行 10 次。&lt;br>
如此一來可以有效縮減執行時間也降低了DB的負擔。&lt;/p>
&lt;h2 id="how-to-chunk">How to chunk&lt;/h2>
&lt;p>&lt;strong>Laravel chunk&lt;/strong> 分成三種&lt;/p>
&lt;ol>
&lt;li>Query Builder chunk&lt;/li>
&lt;li>Eloquent chunk&lt;/li>
&lt;li>Collection chunk&lt;/li>
&lt;/ol>
&lt;h3 id="假設情境">假設情境&lt;/h3>
&lt;p>當我有好幾萬的會員，每年要贈送 100點的點數給他們，&lt;br>
我們建立了一個排程，每年1月1日贈送，&lt;br>
隨著會員數量的增加，執行時間會愈來愈久，&lt;br>
我們必須著手優化這段排程 &amp;hellip;&lt;/p>
&lt;h3 id="original-no-chunk">Original (No chunk)&lt;/h3>
&lt;p>當我們沒有chunk通常都是逐筆寫入&lt;br>
這邊用 &lt;code>each&lt;/code> 作為範例&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">User&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">query&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">each&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$user&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Point&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">insert&lt;/span>&lt;span class="p">([&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;amount&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;user_id&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$user&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">id&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;created_at&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">toDateTimeString&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;updated_at&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">toDateTimeString&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="query-builder-chunk">Query Builder chunk&lt;/h3>
&lt;p>可參考 &lt;a class="link" href="https://laravel.com/docs/9.x/queries#chunking-results" title="Query Builder chunk documentaion"
target="_blank" rel="noopener"
>文件&lt;/a>&lt;/p>
&lt;p>使用方式和 &lt;strong>Eloquent chunk&lt;/strong> 相同&lt;br>
所以我會在下方 &lt;strong>Eloquent chunk&lt;/strong> 共同解釋&lt;/p>
&lt;h3 id="eloquent-chunk">Eloquent chunk&lt;/h3>
&lt;p>可參考 &lt;a class="link" href="https://laravel.com/docs/9.x/eloquent#chunking-results" title="Eloquent chunk documentaion"
target="_blank" rel="noopener"
>官方文件&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">User&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">query&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">chunk&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">500&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$users&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">foreach&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">$users&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="nv">$user&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$data&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;amount&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;user_id&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$user&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">id&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;created_at&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">toDateTimeString&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;updated_at&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">toDateTimeString&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Point&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">insert&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$data&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>運作的方式是用 SQL ，&lt;br>
使用 &lt;code>limit 500 offset 0&lt;/code> 、 &lt;code>limit 500 offset 500&lt;/code> &amp;hellip;.. 直到分完全部&lt;br>
在 query 當下就分塊。&lt;/p>
&lt;h3 id="collection-chunk">Collection chunk&lt;/h3>
&lt;p>可參考 &lt;a class="link" href="https://laravel.com/docs/9.x/collections#method-chunk" title="Collection chunk documentaion"
target="_blank" rel="noopener"
>官方文件&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$chunks&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">User&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">query&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">map&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$user&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;amount&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;user_id&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$user&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">id&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;created_at&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">toDateTimeString&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;updated_at&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nx">now&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">toDateTimeString&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">chunk&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">500&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">toArray&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">foreach&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">$chunks&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="nv">$chunk&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Point&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">insert&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$chunk&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>運作的方式是先都 query出來，再用 php 整理的，&lt;/p>
&lt;p>如圖所示&lt;br>
&lt;img src="../../images/laravel-magic/chunk/collection-chunk-demo.jpeg"
loading="lazy"
>&lt;/p>
&lt;h2 id="比較">比較&lt;/h2>
&lt;p>老實說使用哪一個其實感覺不出來，&lt;br>
因為執行效率差不多，&lt;br>
Eloquent 吃DB資源，Collection 吃記憶體資源，&lt;/p>
&lt;p>&lt;strong>Collection chunk&lt;/strong> 遇過直接網頁執行，記憶體吃掛了的問題，&lt;/p>
&lt;p>最後我還是選擇了 &lt;strong>Eloquent chunk&lt;/strong>&lt;br>
雖然 執行的SQL多了一些 query，但不會吃你記憶體，&lt;/p>
&lt;p>也是看大家取捨拉 ~&lt;/p>
&lt;p>這是我執行3千筆的資訊&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">資料量&lt;/th>
&lt;th>運用&lt;/th>
&lt;th style="text-align: right">花費時間&lt;/th>
&lt;th style="text-align: right">記憶體&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">3000筆&lt;/td>
&lt;td>Original (No chunk)&lt;/td>
&lt;td style="text-align: right">6.6s&lt;/td>
&lt;td style="text-align: right">142MB&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">3000筆&lt;/td>
&lt;td>Eloquent chunk&lt;/td>
&lt;td style="text-align: right">1.52s&lt;/td>
&lt;td style="text-align: right">33MB&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">3000筆&lt;/td>
&lt;td>Collection chunk&lt;/td>
&lt;td style="text-align: right">1.49s&lt;/td>
&lt;td style="text-align: right">141MB&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="題外話">題外話&lt;/h2>
&lt;p>這裡的寫入使用了 &lt;code>Point::insert&lt;/code> 為何不使用 &lt;code>Point::create&lt;/code> ?&lt;br>
是為了批次寫入及效率的問題考量，&lt;br>
之後再來聊聊 Laravel insert &amp;amp; Laravel create 差異吧&lt;/p></description></item><item><title>Laravel Magic 系列 - 第1篇</title><link>https://www.chihyu.me/2022/06/laravel-magic-intro/</link><pubDate>Thu, 23 Jun 2022 23:08:15 +0800</pubDate><guid>https://www.chihyu.me/2022/06/laravel-magic-intro/</guid><description>&lt;img src="https://www.chihyu.me/images/laravel-magic/banner.png" alt="Featured image of post Laravel Magic 系列 - 第1篇" />&lt;p>&lt;strong>Laravel Magic&lt;/strong> 系列為我使用 Laravel 的時方便的功能、推荐的撇布等等 &amp;hellip;&lt;/p>
&lt;p>可以當作 Laravel 的雜記 ~&lt;/p>
&lt;p>我認為 Laravel 提供很多神奇方法，&lt;br>
使用起來就像是魔術般的美妙&lt;br>
故以此命名。👍👍👍&lt;/p></description></item></channel></rss>